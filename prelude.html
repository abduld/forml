
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Prelude.forml</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link href='http://fonts.googleapis.com/css?family=Oswald:300' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">

    <style type="text/css">
.jasmine_reporter a:visited, .jasmine_reporter a {
  color: #303; 
}

.jasmine_reporter a:hover, .jasmine_reporter a:active {
  color: blue; 
}

.run_spec {
  float:right;
  padding-right: 5px;
  font-size: .8em;
  text-decoration: none;
}

.jasmine_reporter {
  margin: 0px 0px 40px 0px;
}

.banner {
  color: #303;
  padding: 5px;
}

.runner.failed {
  background-color: #fdd;
}

.runner.passed {
    background-color: #dfd;
}


.logo {
  float: left;
  font-size: 1.1em;
  padding-left: 5px;
}

.logo .version {
  font-size: .6em;
  padding-left: 1em;
}

.runner.running {
  background-color: yellow;
}


.options {
  text-align: right;
  font-size: .8em;
}




.suite {
  margin: 5px 0px 5px 5px;
  padding-left: 1em;
  padding-top: 2px;
  padding-bottom: 2px;
}

.suite .suite {
  margin: 5px 0px 5px 5px; 
}

.suite.passed {
  background-color: #dfd;
}

.suite.failed {
  background-color: #fdd;
}

.spec {
  margin: 5px 0px 5px 5px;
  padding-left: 1em;
  clear: both;
}

.spec.failed, .spec.passed, .spec.skipped {
  padding-bottom: 5px;
}

.spec.failed {
  background-color: #fbb;
  border-color: red;
}

.spec.passed {
  background-color: #bfb;
  border-color: green;
}

.spec.skipped {
  background-color: #bbb;
}

.messages {
  border-left: 1px dashed gray;
  padding-left: 1em;
  padding-right: 1em;
}

.passed {
 /* background-color: #cfc; */
  display: none;
}

/*
.failed {
  background-color: #fbb;
}
*/
.skipped {
  color: #777;
  background-color: #eee;
  display: none;
}


/*.resultMessage {*/
  /*white-space: pre;*/
/*}*/

.resultMessage span.result {
  display: block;
  line-height: 2em;
  color: black;
}

.resultMessage .mismatch {
  color: black;
}

.stackTrace {
  white-space: pre;
  font-size: .8em;
  margin-left: 10px;
  max-height: 5em;
  overflow: auto;
  border: 1px inset red;
  padding: 1em;
  background: #eef;
}

.finished-at {
  padding-left: 1em;
  font-size: .6em;
}

.show-passed .passed,
.show-skipped .skipped {
  display: block;
}


#jasmine_content {
  position:fixed;
  right: 100%;
}

.runner {
  display: block;
  margin: 5px 0px -5px 5px;
  padding: 2px 0 2px 10px;
}

.pln{color:#000}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.pun,.opn,.clo{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun,.opn,.clo{color:#440}.tag{color:#006;font-weight:bold}.atn{color:#404}.atv{color:#060}}pre.prettyprint{padding:2px;border:1px solid #888}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style-type:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}

/* GitHub Theme */
/* Pretty printing styles. Used with prettify.js. */
/* SPAN elements with the classes below are added by prettyprint. */
/* plain text */
.pln {
  color: #333333; }

@media screen {

  /* string content */
  .str {
    color: #dd1144; }

  /* a keyword */
  .kwd {
    color: purple; }

  /* a comment */
  .com {
    color: #999988; }

  /* a type name */
  .typ {
    color: #445588; }

  /* a literal value */
  .lit {
    color: #4455ff; }

  /* punctuation */
  .pun {
    color: #999999; }

  /* lisp open bracket */
  .opn {
    color: #333333; }

  /* lisp close bracket */
  .clo {
    color: #333333; }

  /* a markup tag name */
  .tag {
    color: navy; }

  /* a markup attribute name */
  .atn {
    color: teal; }

  /* a markup attribute value */
  .atv {
    color: #dd1144; }

  /* a declaration */
  .dec {
    color: #333333; }

  /* a variable name */
  .var {
    color: teal; }

  /* a function name */
  .fun {
    color: #990000; } }
/* Use higher contrast and text-weight for printable form. */
@media print, projection {
  .str {
    color: #060; }

  .kwd {
    color: #006;
    font-weight: bold; }

  .com {
    color: #600;
    font-style: italic; }

  .typ {
    color: #404;
    font-weight: bold; }

  .lit {
    color: #00f; }

  .pun, .opn, .clo {
    color: #440; }

  .tag {
    color: #006;
    font-weight: bold; }

  .atn {
    color: #404; }

  .atv {
    color: #060; } }
/* Style */
pre.prettyprint {
  background: white;
  font-family: Menlo, Monaco, Consolas, monospace;
  font-size: 12px;
  line-height: 1.5;
  padding: 15px 10px; 
  border: 1px solid #ccc; 
border-width: 1px 1px 1px 1px !important;}
   }

/* Specify class=linenums on a pre to get line numbering */
ol.linenums {
  margin-top: 0;
  margin-bottom: 0; }

/* IE indents via margin-left */
li.L0,
li.L1,
li.L2,
li.L3,
li.L4,
li.L5,
li.L6,
li.L7,
li.L8,
li.L9 {
  /* */ }

/* Alternate shading for lines */
li.L1,
li.L3,
li.L5,
li.L7,
li.L9 {
  /* */ }

@import url(https://fonts.googleapis.com/css?family=Lato:300italic,700italic,300,700);
@import url(https://fonts.googleapis.com/css?family=Oswald:300);

body {
  color:black;
  background: white;
}

h1 {
  color:white;
  margin:0 0 20px;
  font-family: Montserrat, Helvetica;

}
#docs h1, #docs h2, #docs h3, #docs h4, #docs h5, #docs h6 {
    color: black;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}

pre, code {
  font-size: 14px;
}

a {
  text-decoration: none;
  color: #E53007;
  opacity: 1;
}

.lead {
  font-family: Oswald;
  color: whitesmoke;
}

header p {
  font-family: Oswald;
  color: whitesmoke;
  margin-bottom: 20px;
font-size: 21px;
font-weight: 200;
line-height: 30px;
}

p, ul, ol, table, pre, dl {
  margin:0 0 20px;
}

h1, h2, h3 {
  line-height:1.1;
}

h1 {
  font-size:20px;
}

h2 {
  font-size: 16px;
}

header {
  z-index: -1;
  padding: 50px;
  box-shadow: inset 0px -10px 15px rgba(0,0,0,0.2);
}

.navbar {
    box-shadow: 0px 10px 15px rgba(0,0,0,0.2);
}

header h1 {
	font-size: 60px;
}

header h1:first-letter {
	color: #E53007;
}

pre, .new_lifted {
  border-radius:2px;
  position:relative;
  padding:1em;
  background:#fcfcfc;
  box-shadow: 0px 0px 1px 1px rgba(0,0,0,0.2);
  -o-box-shadow: 0px 0px 1px 1px  rgba(0,0,0,0.2);
  -moz-box-shadow: 0px 0px 1px 1px  rgba(0,0,0,0.2);
}
pre:before, pre:after {
  bottom:14px;
  content: "";
  position: absolute;
  z-index: -1;
  -ms-transform: rotate(-2deg);
  -webkit-transform: rotate(-2deg); /* Safari and Chrome */
  -o-transform: rotate(-2deg); /* Opera */
  -moz-transform: rotate(-2deg); /* Firefox */
  box-shadow: 0 15px 5px rgba(0, 0, 0, 0.3);
  height: 50px;
  left: 5px;
  max-width: 50%;
  width: 50%;
}
pre:after {
  
  -ms-transform: rotate(2deg); /* IE 9 */
  -webkit-transform: rotate(2deg); /* Safari and Chrome */
  -o-transform: rotate(2deg); /* Opera */
  -moz-transform: rotate(2deg); /* Firefox */
  left: auto;
  right: 5px;
}

.affix {
  top: 40px;
  height: 100%;
}

header {
  background: url(masthead.jpg) 50% 50% gray;
  margin-top: 40px;
}

@media (max-width: 767px) {
  header {
    padding: 50 50px;
    margin: -20px -20px 0px -20px;
  }
  #test_suite {
    margin: -5px -37px 0px -37px;
  }
  .row {
    margin-top: 23px;
  }
}

@media (min-width: 768px) {
  header {
    padding: 100px 50px;
  }
  #test_suite {
    width: 2200px;
    margin-top: -5px;
    margin-left: -2000px;
  }
  .jasmine_reporter > .suite, .jasmine_reporter > .runner {
    padding-left: 1950px;
  }
}

@media (max-width: 979px) and (min-width: 768px) {
  header {
    margin-top: -20px;
  }
}

@media (min-width: 980px) {
  header {
    margin-top: 40px;
  }
  #test_suite {
    width: 2270px;
    margin-top: -5px;
  }
}



@media (min-width: 1200px) {
  #test_suite {
    width: 2370px;
    margin-top: -5px;
  }
}

#docs {
  position: relative;
  background: white;
  z-index: 1000;
  margin-left: -20px;
  padding-left: 30px;
  padding-top: 50px;
}

#docs ol, #docs ul {
  padding-left: 20px;
}

footer {
  background: #1b1b1b;
  color: white;
  position: relative;
  z-index: 10;
}

</style>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>

    <script>var jasmine={unimplementedMethod_:function(){throw Error("unimplemented method");}};jasmine.undefined=jasmine.___undefined___;jasmine.DEFAULT_UPDATE_INTERVAL=250;jasmine.DEFAULT_TIMEOUT_INTERVAL=5E3;jasmine.getGlobal=function(){return function(){return this}()};jasmine.bindOriginal_=function(a,b){var c=a[b];return c.apply?function(){return c.apply(a,arguments)}:jasmine.getGlobal()[b]};jasmine.setTimeout=jasmine.bindOriginal_(jasmine.getGlobal(),"setTimeout");
jasmine.clearTimeout=jasmine.bindOriginal_(jasmine.getGlobal(),"clearTimeout");jasmine.setInterval=jasmine.bindOriginal_(jasmine.getGlobal(),"setInterval");jasmine.clearInterval=jasmine.bindOriginal_(jasmine.getGlobal(),"clearInterval");jasmine.MessageResult=function(a){this.type="log";this.values=a;this.trace=Error()};
jasmine.MessageResult.prototype.toString=function(){for(var a="",b=0;b<this.values.length;b++)0<b&&(a+=" "),a=jasmine.isString_(this.values[b])?a+this.values[b]:a+jasmine.pp(this.values[b]);return a};jasmine.ExpectationResult=function(a){this.type="expect";this.matcherName=a.matcherName;this.passed_=a.passed;this.expected=a.expected;this.actual=a.actual;this.message=this.passed_?"Passed.":a.message;this.trace=this.passed_?"":Error(this.message)};jasmine.ExpectationResult.prototype.toString=function(){return this.message};
jasmine.ExpectationResult.prototype.passed=function(){return this.passed_};jasmine.getEnv=function(){return jasmine.currentEnv_=jasmine.currentEnv_||new jasmine.Env};jasmine.isArray_=function(a){return jasmine.isA_("Array",a)};jasmine.isString_=function(a){return jasmine.isA_("String",a)};jasmine.isNumber_=function(a){return jasmine.isA_("Number",a)};jasmine.isA_=function(a,b){return Object.prototype.toString.apply(b)==="[object "+a+"]"};
jasmine.pp=function(a){var b=new jasmine.StringPrettyPrinter;b.format(a);return b.string};jasmine.isDomNode=function(a){return 0<a.nodeType};jasmine.any=function(a){return new jasmine.Matchers.Any(a)};jasmine.Spy=function(a){this.identity=a||"unknown";this.isSpy=!0;this.plan=function(){};this.mostRecentCall={};this.argsForCall=[];this.calls=[]};jasmine.Spy.prototype.andCallThrough=function(){this.plan=this.originalValue;return this};
jasmine.Spy.prototype.andReturn=function(a){this.plan=function(){return a};return this};jasmine.Spy.prototype.andThrow=function(a){this.plan=function(){throw a;};return this};jasmine.Spy.prototype.andCallFake=function(a){this.plan=a;return this};jasmine.Spy.prototype.reset=function(){this.wasCalled=!1;this.callCount=0;this.argsForCall=[];this.calls=[];this.mostRecentCall={}};
jasmine.createSpy=function(a){var b=function(){b.wasCalled=!0;b.callCount++;var a=jasmine.util.argsToArray(arguments);b.mostRecentCall.object=this;b.mostRecentCall.args=a;b.argsForCall.push(a);b.calls.push({object:this,args:a});return b.plan.apply(this,arguments)},a=new jasmine.Spy(a),c;for(c in a)b[c]=a[c];b.reset();return b};jasmine.isSpy=function(a){return a&&a.isSpy};
jasmine.createSpyObj=function(a,b){if(!jasmine.isArray_(b)||0==b.length)throw Error("createSpyObj requires a non-empty array of method names to create spies for");for(var c={},d=0;d<b.length;d++)c[b[d]]=jasmine.createSpy(a+"."+b[d]);return c};jasmine.log=function(){var a=jasmine.getEnv().currentSpec;a.log.apply(a,arguments)};
var spyOn=function(a,b){return jasmine.getEnv().currentSpec.spyOn(a,b)},it=function(a,b){return jasmine.getEnv().it(a,b)},xit=function(a,b){return jasmine.getEnv().xit(a,b)},expect=function(a){return jasmine.getEnv().currentSpec.expect(a)},runs=function(a){jasmine.getEnv().currentSpec.runs(a)},waits=function(a){jasmine.getEnv().currentSpec.waits(a)},waitsFor=function(a,b,c){jasmine.getEnv().currentSpec.waitsFor.apply(jasmine.getEnv().currentSpec,arguments)},beforeEach=function(a){jasmine.getEnv().beforeEach(a)},
afterEach=function(a){jasmine.getEnv().afterEach(a)},describe=function(a,b){return jasmine.getEnv().describe(a,b)},xdescribe=function(a,b){return jasmine.getEnv().xdescribe(a,b)};
jasmine.XmlHttpRequest="undefined"==typeof XMLHttpRequest?function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(b){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(c){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(d){}throw Error("This browser does not support XMLHttpRequest.");}:XMLHttpRequest;jasmine.util={};jasmine.util.inherit=function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c};
jasmine.util.formatException=function(a){var b;a.line?b=a.line:a.lineNumber&&(b=a.lineNumber);var c;a.sourceURL?c=a.sourceURL:a.fileName&&(c=a.fileName);a=a.name&&a.message?a.name+": "+a.message:a.toString();c&&b&&(a+=" in "+c+" (line "+b+")");return a};jasmine.util.htmlEscape=function(a){return!a?a:a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};jasmine.util.argsToArray=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b};
jasmine.util.extend=function(a,b){for(var c in b)a[c]=b[c];return a};
jasmine.Env=function(){this.currentSuite=this.currentSpec=null;this.currentRunner_=new jasmine.Runner(this);this.reporter=new jasmine.MultiReporter;this.updateInterval=jasmine.DEFAULT_UPDATE_INTERVAL;this.defaultTimeoutInterval=jasmine.DEFAULT_TIMEOUT_INTERVAL;this.lastUpdate=0;this.specFilter=function(){return!0};this.nextSuiteId_=this.nextSpecId_=0;this.equalityTesters_=[];this.matchersClass=function(){jasmine.Matchers.apply(this,arguments)};jasmine.util.inherit(this.matchersClass,jasmine.Matchers);
jasmine.Matchers.wrapInto_(jasmine.Matchers.prototype,this.matchersClass)};jasmine.Env.prototype.setTimeout=jasmine.setTimeout;jasmine.Env.prototype.clearTimeout=jasmine.clearTimeout;jasmine.Env.prototype.setInterval=jasmine.setInterval;jasmine.Env.prototype.clearInterval=jasmine.clearInterval;jasmine.Env.prototype.version=function(){if(jasmine.version_)return jasmine.version_;throw Error("Version not set");};
jasmine.Env.prototype.versionString=function(){if(jasmine.version_){var a=this.version();return a.major+"."+a.minor+"."+a.build+" revision "+a.revision}return"version unknown"};jasmine.Env.prototype.nextSpecId=function(){return this.nextSpecId_++};jasmine.Env.prototype.nextSuiteId=function(){return this.nextSuiteId_++};jasmine.Env.prototype.addReporter=function(a){this.reporter.addReporter(a)};jasmine.Env.prototype.execute=function(){this.currentRunner_.execute()};
jasmine.Env.prototype.describe=function(a,b){var c=new jasmine.Suite(this,a,b,this.currentSuite),d=this.currentSuite;d?d.add(c):this.currentRunner_.add(c);this.currentSuite=c;var e=null;try{b.call(c)}catch(f){e=f}this.currentSuite=d;e&&this.it("encountered a declaration exception",function(){throw e;});return c};jasmine.Env.prototype.beforeEach=function(a){this.currentSuite?this.currentSuite.beforeEach(a):this.currentRunner_.beforeEach(a)};jasmine.Env.prototype.currentRunner=function(){return this.currentRunner_};
jasmine.Env.prototype.afterEach=function(a){this.currentSuite?this.currentSuite.afterEach(a):this.currentRunner_.afterEach(a)};jasmine.Env.prototype.xdescribe=function(){return{execute:function(){}}};jasmine.Env.prototype.it=function(a,b){var c=new jasmine.Spec(this,this.currentSuite,a);this.currentSuite.add(c);this.currentSpec=c;b&&c.runs(b);return c};jasmine.Env.prototype.xit=function(){return{id:this.nextSpecId(),runs:function(){}}};
jasmine.Env.prototype.compareObjects_=function(a,b,c,d){if(a.__Jasmine_been_here_before__===b&&b.__Jasmine_been_here_before__===a)return!0;a.__Jasmine_been_here_before__=b;b.__Jasmine_been_here_before__=a;var e=function(a,b){return null!=a&&a[b]!==jasmine.undefined},f;for(f in b)!e(a,f)&&e(b,f)&&c.push("expected has key '"+f+"', but missing from actual.");for(f in a)!e(b,f)&&e(a,f)&&c.push("expected missing key '"+f+"', but present in actual.");for(f in b)"__Jasmine_been_here_before__"!=f&&(this.equals_(a[f],
b[f],c,d)||d.push("'"+f+"' was '"+(b[f]?jasmine.util.htmlEscape(b[f].toString()):b[f])+"' in expected, but was '"+(a[f]?jasmine.util.htmlEscape(a[f].toString()):a[f])+"' in actual."));jasmine.isArray_(a)&&(jasmine.isArray_(b)&&a.length!=b.length)&&d.push("arrays were not the same length");delete a.__Jasmine_been_here_before__;delete b.__Jasmine_been_here_before__;return 0==c.length&&0==d.length};
jasmine.Env.prototype.equals_=function(a,b,c,d){for(var c=c||[],d=d||[],e=0;e<this.equalityTesters_.length;e++){var f=(0,this.equalityTesters_[e])(a,b,this,c,d);if(f!==jasmine.undefined)return f}return a===b?!0:a===jasmine.undefined||null===a||b===jasmine.undefined||null===b?a==jasmine.undefined&&b==jasmine.undefined:jasmine.isDomNode(a)&&jasmine.isDomNode(b)?a===b:a instanceof Date&&b instanceof Date?a.getTime()==b.getTime():a instanceof jasmine.Matchers.Any?a.matches(b):b instanceof jasmine.Matchers.Any?
b.matches(a):jasmine.isString_(a)&&jasmine.isString_(b)||jasmine.isNumber_(a)&&jasmine.isNumber_(b)?a==b:"object"===typeof a&&"object"===typeof b?this.compareObjects_(a,b,c,d):a===b};jasmine.Env.prototype.contains_=function(a,b){if(jasmine.isArray_(a)){for(var c=0;c<a.length;c++)if(this.equals_(a[c],b))return!0;return!1}return 0<=a.indexOf(b)};jasmine.Env.prototype.addEqualityTester=function(a){this.equalityTesters_.push(a)};jasmine.Reporter=function(){};
jasmine.Reporter.prototype.reportRunnerStarting=function(){};jasmine.Reporter.prototype.reportRunnerResults=function(){};jasmine.Reporter.prototype.reportSuiteResults=function(){};jasmine.Reporter.prototype.reportSpecStarting=function(){};jasmine.Reporter.prototype.reportSpecResults=function(){};jasmine.Reporter.prototype.log=function(){};jasmine.Block=function(a,b,c){this.env=a;this.func=b;this.spec=c};jasmine.Block.prototype.execute=function(a){try{this.func.apply(this.spec)}catch(b){this.spec.fail(b)}a()};
jasmine.JsApiReporter=function(){this.finished=this.started=!1;this.suites_=[];this.results_={}};jasmine.JsApiReporter.prototype.reportRunnerStarting=function(a){this.started=!0;for(var a=a.topLevelSuites(),b=0;b<a.length;b++)this.suites_.push(this.summarize_(a[b]))};jasmine.JsApiReporter.prototype.suites=function(){return this.suites_};
jasmine.JsApiReporter.prototype.summarize_=function(a){var b=a instanceof jasmine.Suite,c={id:a.id,name:a.description,type:b?"suite":"spec",children:[]};if(b){a=a.children();for(b=0;b<a.length;b++)c.children.push(this.summarize_(a[b]))}return c};jasmine.JsApiReporter.prototype.results=function(){return this.results_};jasmine.JsApiReporter.prototype.resultsForSpec=function(a){return this.results_[a]};jasmine.JsApiReporter.prototype.reportRunnerResults=function(){this.finished=!0};
jasmine.JsApiReporter.prototype.reportSuiteResults=function(){};jasmine.JsApiReporter.prototype.reportSpecResults=function(a){this.results_[a.id]={messages:a.results().getItems(),result:0<a.results().failedCount?"failed":"passed"}};jasmine.JsApiReporter.prototype.log=function(){};jasmine.JsApiReporter.prototype.resultsForSpecs=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];b[d]=this.summarizeResult_(this.results_[d])}return b};
jasmine.JsApiReporter.prototype.summarizeResult_=function(a){for(var b=[],c=a.messages.length,d=0;d<c;d++){var e=a.messages[d];b.push({text:"log"==e.type?e.toString():jasmine.undefined,passed:e.passed?e.passed():!0,type:e.type,message:e.message,trace:{stack:e.passed&&!e.passed()?e.trace.stack:jasmine.undefined}})}return{result:a.result,messages:b}};jasmine.Matchers=function(a,b,c,d){this.env=a;this.actual=b;this.spec=c;this.isNot=d||!1;this.reportWasCalled_=!1};
jasmine.Matchers.pp=function(){throw Error("jasmine.Matchers.pp() is no longer supported, please use jasmine.pp() instead!");};jasmine.Matchers.prototype.report=function(){throw Error("As of jasmine 0.11, custom matchers must be implemented differently -- please see jasmine docs");};jasmine.Matchers.wrapInto_=function(a,b){for(var c in a)"report"!=c&&(b.prototype[c]=jasmine.Matchers.matcherFn_(c,a[c]))};
jasmine.Matchers.matcherFn_=function(a,b){return function(){var c=jasmine.util.argsToArray(arguments),d=b.apply(this,arguments);this.isNot&&(d=!d);if(this.reportWasCalled_)return d;var e;if(!d)if(this.message)e=this.message.apply(this,arguments),jasmine.isArray_(e)&&(e=e[this.isNot?1:0]);else{e=a.replace(/[A-Z]/g,function(a){return" "+a.toLowerCase()});e="Expected "+jasmine.pp(this.actual)+(this.isNot?" not ":" ")+e;if(0<c.length)for(var f=0;f<c.length;f++)0<f&&(e+=","),e+=" "+jasmine.pp(c[f]);e+=
"."}this.spec.addMatcherResult(new jasmine.ExpectationResult({matcherName:a,passed:d,expected:1<c.length?c:c[0],actual:this.actual,message:e}));return jasmine.undefined}};jasmine.Matchers.prototype.toBe=function(a){return this.actual===a};jasmine.Matchers.prototype.toNotBe=function(a){return this.actual!==a};jasmine.Matchers.prototype.toEqual=function(a){return this.env.equals_(this.actual,a)};jasmine.Matchers.prototype.toNotEqual=function(a){return!this.env.equals_(this.actual,a)};
jasmine.Matchers.prototype.toMatch=function(a){return RegExp(a).test(this.actual)};jasmine.Matchers.prototype.toNotMatch=function(a){return!RegExp(a).test(this.actual)};jasmine.Matchers.prototype.toBeDefined=function(){return this.actual!==jasmine.undefined};jasmine.Matchers.prototype.toBeUndefined=function(){return this.actual===jasmine.undefined};jasmine.Matchers.prototype.toBeNull=function(){return null===this.actual};jasmine.Matchers.prototype.toBeTruthy=function(){return!!this.actual};
jasmine.Matchers.prototype.toBeFalsy=function(){return!this.actual};jasmine.Matchers.prototype.toHaveBeenCalled=function(){if(0<arguments.length)throw Error("toHaveBeenCalled does not take arguments, use toHaveBeenCalledWith");if(!jasmine.isSpy(this.actual))throw Error("Expected a spy, but got "+jasmine.pp(this.actual)+".");this.message=function(){return["Expected spy "+this.actual.identity+" to have been called.","Expected spy "+this.actual.identity+" not to have been called."]};return this.actual.wasCalled};
jasmine.Matchers.prototype.wasCalled=jasmine.Matchers.prototype.toHaveBeenCalled;jasmine.Matchers.prototype.wasNotCalled=function(){if(0<arguments.length)throw Error("wasNotCalled does not take arguments");if(!jasmine.isSpy(this.actual))throw Error("Expected a spy, but got "+jasmine.pp(this.actual)+".");this.message=function(){return["Expected spy "+this.actual.identity+" to not have been called.","Expected spy "+this.actual.identity+" to have been called."]};return!this.actual.wasCalled};
jasmine.Matchers.prototype.toHaveBeenCalledWith=function(){var a=jasmine.util.argsToArray(arguments);if(!jasmine.isSpy(this.actual))throw Error("Expected a spy, but got "+jasmine.pp(this.actual)+".");this.message=function(){return 0==this.actual.callCount?["Expected spy to have been called with "+jasmine.pp(a)+" but it was never called.","Expected spy not to have been called with "+jasmine.pp(a)+" but it was."]:["Expected spy to have been called with "+jasmine.pp(a)+" but was called with "+jasmine.pp(this.actual.argsForCall),
"Expected spy not to have been called with "+jasmine.pp(a)+" but was called with "+jasmine.pp(this.actual.argsForCall)]};return this.env.contains_(this.actual.argsForCall,a)};jasmine.Matchers.prototype.wasCalledWith=jasmine.Matchers.prototype.toHaveBeenCalledWith;
jasmine.Matchers.prototype.wasNotCalledWith=function(){var a=jasmine.util.argsToArray(arguments);if(!jasmine.isSpy(this.actual))throw Error("Expected a spy, but got "+jasmine.pp(this.actual)+".");this.message=function(){return["Expected spy not to have been called with "+jasmine.pp(a)+" but it was","Expected spy to have been called with "+jasmine.pp(a)+" but it was"]};return!this.env.contains_(this.actual.argsForCall,a)};
jasmine.Matchers.prototype.toContain=function(a){return this.env.contains_(this.actual,a)};jasmine.Matchers.prototype.toNotContain=function(a){return!this.env.contains_(this.actual,a)};jasmine.Matchers.prototype.toBeLessThan=function(a){return this.actual<a};jasmine.Matchers.prototype.toBeGreaterThan=function(a){return this.actual>a};
jasmine.Matchers.prototype.toThrow=function(a){var b=!1,c;if("function"!=typeof this.actual)throw Error("Actual is not a function");try{this.actual()}catch(d){c=d}c&&(b=a===jasmine.undefined||this.env.equals_(c.message||c,a.message||a));var e=this.isNot?"not ":"";this.message=function(){return c&&(a===jasmine.undefined||!this.env.equals_(c.message||c,a.message||a))?["Expected function "+e+"to throw",a?a.message||a:" an exception",", but it threw",c.message||c].join(" "):"Expected function to throw an exception."};
return b};jasmine.Matchers.Any=function(a){this.expectedClass=a};jasmine.Matchers.Any.prototype.matches=function(a){return this.expectedClass==String?"string"==typeof a||a instanceof String:this.expectedClass==Number?"number"==typeof a||a instanceof Number:this.expectedClass==Function?"function"==typeof a||a instanceof Function:this.expectedClass==Object?"object"==typeof a:a instanceof this.expectedClass};
jasmine.Matchers.Any.prototype.toString=function(){return"<jasmine.any("+this.expectedClass+")>"};jasmine.MultiReporter=function(){this.subReporters_=[]};jasmine.util.inherit(jasmine.MultiReporter,jasmine.Reporter);jasmine.MultiReporter.prototype.addReporter=function(a){this.subReporters_.push(a)};
(function(){for(var a="reportRunnerStarting reportRunnerResults reportSuiteResults reportSpecStarting reportSpecResults log".split(" "),b=0;b<a.length;b++){var c=a[b];jasmine.MultiReporter.prototype[c]=function(a){return function(){for(var b=0;b<this.subReporters_.length;b++){var c=this.subReporters_[b];c[a]&&c[a].apply(c,arguments)}}}(c)}})();jasmine.NestedResults=function(){this.failedCount=this.passedCount=this.totalCount=0;this.skipped=!1;this.items_=[]};
jasmine.NestedResults.prototype.rollupCounts=function(a){this.totalCount+=a.totalCount;this.passedCount+=a.passedCount;this.failedCount+=a.failedCount};jasmine.NestedResults.prototype.log=function(a){this.items_.push(new jasmine.MessageResult(a))};jasmine.NestedResults.prototype.getItems=function(){return this.items_};jasmine.NestedResults.prototype.addResult=function(a){"log"!=a.type&&(a.items_?this.rollupCounts(a):(this.totalCount++,a.passed()?this.passedCount++:this.failedCount++));this.items_.push(a)};
jasmine.NestedResults.prototype.passed=function(){return this.passedCount===this.totalCount};jasmine.PrettyPrinter=function(){this.ppNestLevel_=0};
jasmine.PrettyPrinter.prototype.format=function(a){if(40<this.ppNestLevel_)throw Error("jasmine.PrettyPrinter: format() nested too deeply!");this.ppNestLevel_++;try{a===jasmine.undefined?this.emitScalar("undefined"):null===a?this.emitScalar("null"):a===jasmine.getGlobal()?this.emitScalar("<global>"):a instanceof jasmine.Matchers.Any?this.emitScalar(a.toString()):"string"===typeof a?this.emitString(a):jasmine.isSpy(a)?this.emitScalar("spy on "+a.identity):a instanceof RegExp?this.emitScalar(a.toString()):
"function"===typeof a?this.emitScalar("Function"):"number"===typeof a.nodeType?this.emitScalar("HTMLNode"):a instanceof Date?this.emitScalar("Date("+a+")"):a.__Jasmine_been_here_before__?this.emitScalar("<circular reference: "+(jasmine.isArray_(a)?"Array":"Object")+">"):jasmine.isArray_(a)||"object"==typeof a?(a.__Jasmine_been_here_before__=!0,jasmine.isArray_(a)?this.emitArray(a):this.emitObject(a),delete a.__Jasmine_been_here_before__):this.emitScalar(a.toString())}finally{this.ppNestLevel_--}};
jasmine.PrettyPrinter.prototype.iterateObject=function(a,b){for(var c in a)"__Jasmine_been_here_before__"!=c&&b(c,a.__lookupGetter__?null!=a.__lookupGetter__(c):!1)};jasmine.PrettyPrinter.prototype.emitArray=jasmine.unimplementedMethod_;jasmine.PrettyPrinter.prototype.emitObject=jasmine.unimplementedMethod_;jasmine.PrettyPrinter.prototype.emitScalar=jasmine.unimplementedMethod_;jasmine.PrettyPrinter.prototype.emitString=jasmine.unimplementedMethod_;
jasmine.StringPrettyPrinter=function(){jasmine.PrettyPrinter.call(this);this.string=""};jasmine.util.inherit(jasmine.StringPrettyPrinter,jasmine.PrettyPrinter);jasmine.StringPrettyPrinter.prototype.emitScalar=function(a){this.append(a)};jasmine.StringPrettyPrinter.prototype.emitString=function(a){this.append("'"+a+"'")};jasmine.StringPrettyPrinter.prototype.emitArray=function(a){this.append("[ ");for(var b=0;b<a.length;b++)0<b&&this.append(", "),this.format(a[b]);this.append(" ]")};
jasmine.StringPrettyPrinter.prototype.emitObject=function(a){var b=this;this.append("{ ");var c=!0;this.iterateObject(a,function(d,e){c?c=!1:b.append(", ");b.append(d);b.append(" : ");e?b.append("<getter>"):b.format(a[d])});this.append(" }")};jasmine.StringPrettyPrinter.prototype.append=function(a){this.string+=a};jasmine.Queue=function(a){this.env=a;this.blocks=[];this.running=!1;this.offset=this.index=0;this.abort=!1};jasmine.Queue.prototype.addBefore=function(a){this.blocks.unshift(a)};
jasmine.Queue.prototype.add=function(a){this.blocks.push(a)};jasmine.Queue.prototype.insertNext=function(a){this.blocks.splice(this.index+this.offset+1,0,a);this.offset++};jasmine.Queue.prototype.start=function(a){this.running=!0;this.onComplete=a;this.next_()};jasmine.Queue.prototype.isRunning=function(){return this.running};jasmine.Queue.LOOP_DONT_RECURSE=!0;
jasmine.Queue.prototype.next_=function(){for(var a=this,b=!0;b;)if(b=!1,a.index<a.blocks.length&&!this.abort){var c=!0,d=!1,e=function(){if(jasmine.Queue.LOOP_DONT_RECURSE&&c)d=!0;else{a.blocks[a.index].abort&&(a.abort=!0);a.offset=0;a.index++;var e=(new Date).getTime();a.env.updateInterval&&e-a.env.lastUpdate>a.env.updateInterval?(a.env.lastUpdate=e,a.env.setTimeout(function(){a.next_()},0)):jasmine.Queue.LOOP_DONT_RECURSE&&d?b=!0:a.next_()}};a.blocks[a.index].execute(e);c=!1;d&&e()}else if(a.running=
!1,a.onComplete)a.onComplete()};jasmine.Queue.prototype.results=function(){for(var a=new jasmine.NestedResults,b=0;b<this.blocks.length;b++)this.blocks[b].results&&a.addResult(this.blocks[b].results());return a};jasmine.Runner=function(a){this.env=a;this.queue=new jasmine.Queue(a);this.before_=[];this.after_=[];this.suites_=[]};jasmine.Runner.prototype.execute=function(){var a=this;a.env.reporter.reportRunnerStarting&&a.env.reporter.reportRunnerStarting(this);a.queue.start(function(){a.finishCallback()})};
jasmine.Runner.prototype.beforeEach=function(a){a.typeName="beforeEach";this.before_.splice(0,0,a)};jasmine.Runner.prototype.afterEach=function(a){a.typeName="afterEach";this.after_.splice(0,0,a)};jasmine.Runner.prototype.finishCallback=function(){this.env.reporter.reportRunnerResults(this)};jasmine.Runner.prototype.addSuite=function(a){this.suites_.push(a)};jasmine.Runner.prototype.add=function(a){a instanceof jasmine.Suite&&this.addSuite(a);this.queue.add(a)};
jasmine.Runner.prototype.specs=function(){for(var a=this.suites(),b=[],c=0;c<a.length;c++)b=b.concat(a[c].specs());return b};jasmine.Runner.prototype.suites=function(){return this.suites_};jasmine.Runner.prototype.topLevelSuites=function(){for(var a=[],b=0;b<this.suites_.length;b++)this.suites_[b].parentSuite||a.push(this.suites_[b]);return a};jasmine.Runner.prototype.results=function(){return this.queue.results()};
jasmine.Spec=function(a,b,c){if(!a)throw Error("jasmine.Env() required");if(!b)throw Error("jasmine.Suite() required");this.id=a.nextSpecId?a.nextSpecId():null;this.env=a;this.suite=b;this.description=c;this.queue=new jasmine.Queue(a);this.afterCallbacks=[];this.spies_=[];this.results_=new jasmine.NestedResults;this.results_.description=c;this.matchersClass=null};jasmine.Spec.prototype.getFullName=function(){return this.suite.getFullName()+" "+this.description+"."};
jasmine.Spec.prototype.results=function(){return this.results_};jasmine.Spec.prototype.log=function(){return this.results_.log(arguments)};jasmine.Spec.prototype.runs=function(a){this.addToQueue(new jasmine.Block(this.env,a,this));return this};jasmine.Spec.prototype.addToQueue=function(a){this.queue.isRunning()?this.queue.insertNext(a):this.queue.add(a)};jasmine.Spec.prototype.addMatcherResult=function(a){this.results_.addResult(a)};
jasmine.Spec.prototype.expect=function(a){var b=new (this.getMatchersClass_())(this.env,a,this);b.not=new (this.getMatchersClass_())(this.env,a,this,!0);return b};jasmine.Spec.prototype.waits=function(a){this.addToQueue(new jasmine.WaitsBlock(this.env,a,this));return this};
jasmine.Spec.prototype.waitsFor=function(a,b,c){for(var d=null,e=null,f=null,g=0;g<arguments.length;g++){var h=arguments[g];switch(typeof h){case "function":d=h;break;case "string":e=h;break;case "number":f=h}}this.addToQueue(new jasmine.WaitsForBlock(this.env,f,d,e,this));return this};jasmine.Spec.prototype.fail=function(a){this.results_.addResult(new jasmine.ExpectationResult({passed:!1,message:a?jasmine.util.formatException(a):"Exception"}))};
jasmine.Spec.prototype.getMatchersClass_=function(){return this.matchersClass||this.env.matchersClass};jasmine.Spec.prototype.addMatchers=function(a){var b=this.getMatchersClass_(),c=function(){b.apply(this,arguments)};jasmine.util.inherit(c,b);jasmine.Matchers.wrapInto_(a,c);this.matchersClass=c};jasmine.Spec.prototype.finishCallback=function(){this.env.reporter.reportSpecResults(this)};jasmine.Spec.prototype.finish=function(a){this.removeAllSpies();this.finishCallback();a&&a()};
jasmine.Spec.prototype.after=function(a){this.queue.isRunning()?this.queue.add(new jasmine.Block(this.env,a,this)):this.afterCallbacks.unshift(a)};jasmine.Spec.prototype.execute=function(a){var b=this;b.env.specFilter(b)?(this.env.reporter.reportSpecStarting(this),b.env.currentSpec=b,b.addBeforesAndAftersToQueue(),b.queue.start(function(){b.finish(a)})):(b.results_.skipped=!0,b.finish(a))};
jasmine.Spec.prototype.addBeforesAndAftersToQueue=function(){for(var a=this.env.currentRunner(),b,c=this.suite;c;c=c.parentSuite)for(b=0;b<c.before_.length;b++)this.queue.addBefore(new jasmine.Block(this.env,c.before_[b],this));for(b=0;b<a.before_.length;b++)this.queue.addBefore(new jasmine.Block(this.env,a.before_[b],this));for(b=0;b<this.afterCallbacks.length;b++)this.queue.add(new jasmine.Block(this.env,this.afterCallbacks[b],this));for(c=this.suite;c;c=c.parentSuite)for(b=0;b<c.after_.length;b++)this.queue.add(new jasmine.Block(this.env,
c.after_[b],this));for(b=0;b<a.after_.length;b++)this.queue.add(new jasmine.Block(this.env,a.after_[b],this))};jasmine.Spec.prototype.explodes=function(){throw"explodes function should not have been called";};
jasmine.Spec.prototype.spyOn=function(a,b,c){if(a==jasmine.undefined)throw"spyOn could not find an object to spy upon for "+b+"()";if(!c&&a[b]===jasmine.undefined)throw b+"() method does not exist";if(!c&&a[b]&&a[b].isSpy)throw Error(b+" has already been spied upon");c=jasmine.createSpy(b);this.spies_.push(c);c.baseObj=a;c.methodName=b;c.originalValue=a[b];return a[b]=c};
jasmine.Spec.prototype.removeAllSpies=function(){for(var a=0;a<this.spies_.length;a++){var b=this.spies_[a];b.baseObj[b.methodName]=b.originalValue}this.spies_=[]};jasmine.Suite=function(a,b,c,d){this.id=a.nextSuiteId?a.nextSuiteId():null;this.description=b;this.queue=new jasmine.Queue(a);this.parentSuite=d;this.env=a;this.before_=[];this.after_=[];this.children_=[];this.suites_=[];this.specs_=[]};
jasmine.Suite.prototype.getFullName=function(){for(var a=this.description,b=this.parentSuite;b;b=b.parentSuite)a=b.description+" "+a;return a};jasmine.Suite.prototype.finish=function(a){this.env.reporter.reportSuiteResults(this);this.finished=!0;"function"==typeof a&&a()};jasmine.Suite.prototype.beforeEach=function(a){a.typeName="beforeEach";this.before_.unshift(a)};jasmine.Suite.prototype.afterEach=function(a){a.typeName="afterEach";this.after_.unshift(a)};jasmine.Suite.prototype.results=function(){return this.queue.results()};
jasmine.Suite.prototype.add=function(a){this.children_.push(a);a instanceof jasmine.Suite?(this.suites_.push(a),this.env.currentRunner().addSuite(a)):this.specs_.push(a);this.queue.add(a)};jasmine.Suite.prototype.specs=function(){return this.specs_};jasmine.Suite.prototype.suites=function(){return this.suites_};jasmine.Suite.prototype.children=function(){return this.children_};jasmine.Suite.prototype.execute=function(a){var b=this;this.queue.start(function(){b.finish(a)})};
jasmine.WaitsBlock=function(a,b,c){this.timeout=b;jasmine.Block.call(this,a,null,c)};jasmine.util.inherit(jasmine.WaitsBlock,jasmine.Block);jasmine.WaitsBlock.prototype.execute=function(a){this.env.reporter.log(">> Jasmine waiting for "+this.timeout+" ms...");this.env.setTimeout(function(){a()},this.timeout)};jasmine.WaitsForBlock=function(a,b,c,d,e){this.timeout=b||a.defaultTimeoutInterval;this.latchFunction=c;this.message=d;this.totalTimeSpentWaitingForLatch=0;jasmine.Block.call(this,a,null,e)};
jasmine.util.inherit(jasmine.WaitsForBlock,jasmine.Block);jasmine.WaitsForBlock.TIMEOUT_INCREMENT=10;
jasmine.WaitsForBlock.prototype.execute=function(a){this.env.reporter.log(">> Jasmine waiting for "+(this.message||"something to happen"));var b;try{b=this.latchFunction.apply(this.spec)}catch(c){this.spec.fail(c);a();return}if(b)a();else if(this.totalTimeSpentWaitingForLatch>=this.timeout)this.spec.fail({name:"timeout",message:"timed out after "+this.timeout+" msec waiting for "+(this.message||"something to happen")}),this.abort=!0,a();else{this.totalTimeSpentWaitingForLatch+=jasmine.WaitsForBlock.TIMEOUT_INCREMENT;
var d=this;this.env.setTimeout(function(){d.execute(a)},jasmine.WaitsForBlock.TIMEOUT_INCREMENT)}};jasmine.FakeTimer=function(){this.reset();var a=this;a.setTimeout=function(b,c){a.timeoutsMade++;a.scheduleFunction(a.timeoutsMade,b,c,!1);return a.timeoutsMade};a.setInterval=function(b,c){a.timeoutsMade++;a.scheduleFunction(a.timeoutsMade,b,c,!0);return a.timeoutsMade};a.clearTimeout=function(b){a.scheduledFunctions[b]=jasmine.undefined};a.clearInterval=function(b){a.scheduledFunctions[b]=jasmine.undefined}};
jasmine.FakeTimer.prototype.reset=function(){this.timeoutsMade=0;this.scheduledFunctions={};this.nowMillis=0};jasmine.FakeTimer.prototype.tick=function(a){var b=this.nowMillis,a=b+a;this.runFunctionsWithinRange(b,a);this.nowMillis=a};
jasmine.FakeTimer.prototype.runFunctionsWithinRange=function(a,b){var c,d=[],e;for(e in this.scheduledFunctions)c=this.scheduledFunctions[e],c!=jasmine.undefined&&(c.runAtMillis>=a&&c.runAtMillis<=b)&&(d.push(c),this.scheduledFunctions[e]=jasmine.undefined);if(0<d.length){d.sort(function(a,b){return a.runAtMillis-b.runAtMillis});for(c=0;c<d.length;++c)try{var f=d[c];this.nowMillis=f.runAtMillis;f.funcToCall();f.recurring&&this.scheduleFunction(f.timeoutKey,f.funcToCall,f.millis,!0)}catch(g){}this.runFunctionsWithinRange(a,
b)}};jasmine.FakeTimer.prototype.scheduleFunction=function(a,b,c,d){this.scheduledFunctions[a]={runAtMillis:this.nowMillis+c,funcToCall:b,recurring:d,timeoutKey:a,millis:c}};
jasmine.Clock={defaultFakeTimer:new jasmine.FakeTimer,reset:function(){jasmine.Clock.assertInstalled();jasmine.Clock.defaultFakeTimer.reset()},tick:function(a){jasmine.Clock.assertInstalled();jasmine.Clock.defaultFakeTimer.tick(a)},runFunctionsWithinRange:function(a,b){jasmine.Clock.defaultFakeTimer.runFunctionsWithinRange(a,b)},scheduleFunction:function(a,b,c,d){jasmine.Clock.defaultFakeTimer.scheduleFunction(a,b,c,d)},useMock:function(){jasmine.Clock.isInstalled()||(jasmine.getEnv().currentSpec.after(jasmine.Clock.uninstallMock),
jasmine.Clock.installMock())},installMock:function(){jasmine.Clock.installed=jasmine.Clock.defaultFakeTimer},uninstallMock:function(){jasmine.Clock.assertInstalled();jasmine.Clock.installed=jasmine.Clock.real},real:{setTimeout:jasmine.getGlobal().setTimeout,clearTimeout:jasmine.getGlobal().clearTimeout,setInterval:jasmine.getGlobal().setInterval,clearInterval:jasmine.getGlobal().clearInterval},assertInstalled:function(){if(!jasmine.Clock.isInstalled())throw Error("Mock clock is not installed, use jasmine.Clock.useMock()");
},isInstalled:function(){return jasmine.Clock.installed==jasmine.Clock.defaultFakeTimer},installed:null};jasmine.Clock.installed=jasmine.Clock.real;jasmine.getGlobal().setTimeout=function(a,b){return jasmine.Clock.installed.setTimeout.apply?jasmine.Clock.installed.setTimeout.apply(this,arguments):jasmine.Clock.installed.setTimeout(a,b)};
jasmine.getGlobal().setInterval=function(a,b){return jasmine.Clock.installed.setInterval.apply?jasmine.Clock.installed.setInterval.apply(this,arguments):jasmine.Clock.installed.setInterval(a,b)};jasmine.getGlobal().clearTimeout=function(a){return jasmine.Clock.installed.clearTimeout.apply?jasmine.Clock.installed.clearTimeout.apply(this,arguments):jasmine.Clock.installed.clearTimeout(a)};
jasmine.getGlobal().clearInterval=function(a){return jasmine.Clock.installed.clearTimeout.apply?jasmine.Clock.installed.clearInterval.apply(this,arguments):jasmine.Clock.installed.clearInterval(a)};jasmine.version_={major:1,minor:0,build:1,revision:1286311016};
jasmine.TrivialReporter=function(a){this.document=a||document;this.suiteDivs={};this.logRunningSpecs=!1};jasmine.TrivialReporter.prototype.createDom=function(a,b,c){for(var d=document.createElement(a),e=2;e<arguments.length;e++){var f=arguments[e];"string"===typeof f?d.appendChild(document.createTextNode(f)):f&&d.appendChild(f)}for(var g in b)"className"==g?d[g]=b[g]:d.setAttribute(g,b[g]);return d};
jasmine.TrivialReporter.prototype.reportRunnerStarting=function(a){this.outerDiv=this.createDom("div",{className:"jasmine_reporter"},this.runnerDiv=this.createDom("div",{className:"runner running"},this.createDom("a",{className:"run_spec",href:"?"},""),this.runnerMessageSpan=this.createDom("span",{},"Running..."),this.finishedAtSpan=this.createDom("span",{className:"finished-at"},"")));this.document.body.appendChild(this.outerDiv);a=a.suites();for(var b=0;b<a.length;b++){var c=a[b],d=this.createDom("div",
{className:"suite"},this.createDom("a",{className:"run_spec",href:"?spec="+encodeURIComponent(c.getFullName())},""),this.createDom("a",{className:"description",href:"?spec="+encodeURIComponent(c.getFullName())},c.description));this.suiteDivs[c.id]=d;var e=this.outerDiv;c.parentSuite&&(e=this.suiteDivs[c.parentSuite.id]);e.appendChild(d)}this.startedAt=new Date;this.outerDiv.className+=" show-passed"};
jasmine.TrivialReporter.prototype.reportRunnerResults=function(a){var b=a.results(),c=0<b.failedCount?"runner failed":"runner passed";this.runnerDiv.setAttribute("class",c);this.runnerDiv.setAttribute("className",c);a=a.specs();for(var d=c=0;d<a.length;d++)this.specFilter(a[d])&&c++;b=""+c+" spec"+(1==c?"":"s")+", "+b.failedCount+" failure"+(1==b.failedCount?"":"s");b+=" in "+((new Date).getTime()-this.startedAt.getTime())/1E3+"s";this.runnerMessageSpan.replaceChild(this.createDom("a",{className:"description",
href:"?"},b),this.runnerMessageSpan.firstChild);this.finishedAtSpan.appendChild(document.createTextNode("Finished at "+(new Date).toString()))};jasmine.TrivialReporter.prototype.reportSuiteResults=function(a){var b=a.results(),c=b.passed()?"passed":"failed";0==b.totalCount&&(c="skipped");this.suiteDivs[a.id].className+=" "+c};jasmine.TrivialReporter.prototype.reportSpecStarting=function(a){this.logRunningSpecs&&this.log(">> Jasmine Running "+a.suite.description+" "+a.description+"...")};
jasmine.TrivialReporter.prototype.reportSpecResults=function(a){var b=a.results(),c=b.passed()?"passed":"failed";b.skipped&&(c="skipped");for(var c=this.createDom("div",{className:"spec "+c},this.createDom("a",{className:"run_spec",href:"?spec="+encodeURIComponent(a.getFullName())},""),this.createDom("a",{className:"description",href:"?spec="+encodeURIComponent(a.getFullName()),title:a.getFullName()},a.description.split("__::__")[1])),b=b.getItems(),d=this.createDom("div",{className:"messages"}),
e=0;e<b.length;e++){var f=b[e];"log"==f.type?d.appendChild(this.createDom("div",{className:"resultMessage log"},f.toString())):"expect"==f.type&&f.passed&&!f.passed()&&(d.appendChild(this.createDom("div",{className:"resultMessage fail"},f.message)),f.trace.stack&&d.appendChild(this.createDom("div",{className:"stackTrace"},f.trace.stack)))}0<d.childNodes.length&&c.appendChild(d);this.suiteDivs[a.suite.id].appendChild(c)};
jasmine.TrivialReporter.prototype.log=function(){var a=jasmine.getGlobal().console;a&&a.log&&(a.log.apply?a.log.apply(a,arguments):a.log(arguments))};jasmine.TrivialReporter.prototype.getLocation=function(){return this.document.location};jasmine.TrivialReporter.prototype.specFilter=function(a){for(var b={},c=this.getLocation().search.substring(1).split("&"),d=0;d<c.length;d++){var e=c[d].split("=");b[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return!b.spec?!0:0==a.getFullName().indexOf(b.spec)}; (function(){jasmine.FormlReporter=function(a){this.document=a||document;this.suiteDivs={};this.logRunningSpecs=!1};jasmine.FormlReporter.prototype.createDom=function(){};jasmine.FormlReporter.prototype.reportRunnerStarting=function(a){a=a.suites();for(var b=0;b<a.length;b++);this.startedAt=new Date};jasmine.FormlReporter.prototype.reportRunnerResults=function(){$("#run_tests").unbind();$("header #test_button").css({"background-color":"lightgreen"});$("#docs").css("box-shadow","-10px 20px 15px rgba(0,0,0,0.1)");
$("header #test_button a, header #test_button strong").css({color:"white"})};jasmine.FormlReporter.prototype.reportSuiteResults=function(){};jasmine.FormlReporter.prototype.reportSpecStarting=function(){};jasmine.FormlReporter.prototype.reportSpecResults=function(a){var b=a.results().passed()?"passed":"failed",c="#test_"+a.description.split("__::__")[0];$(c);a.description=a.description.split("__::__")[1];"passed"==b?(c.indexOf("multi"),$(c).before("<span style='border-radius:3;margin-right:-50px;background-color:rgba(32,186,24,0.5)' title='"+
JSON.stringify(a.results_.items_[0].actual)+"'> <span style='color:rgb(255,255,255);font-weight:bold'>PASS</span> </span> ")):(c.indexOf("multi"),$(c).before("<span style='border-radius:3;margin-right:-50px;background-color:rgba(182,24,32,0.5)' title='"+JSON.stringify(a.results_.items_[0].actual)+"'> <span style='color:rgb(255,255,255);font-weight:bold'>FAIL</span> </span> "))};jasmine.FormlReporter.prototype.log=function(){};jasmine.FormlReporter.prototype.getLocation=function(){return this.document.location};
jasmine.FormlReporter.prototype.specFilter=function(a){for(var b={},c=this.getLocation().search.substring(1).split("&"),d=0;d<c.length;d++){var e=c[d].split("=");b[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return!b.spec?!0:0===a.getFullName().indexOf(b.spec)}})(); var q=null;window.PR_SHOULD_USE_CONTINUATION=!0;
(function(){function L(a){function m(a){var f=a.charCodeAt(0);if(f!==92)return f;var b=a.charAt(1);return(f=r[b])?f:"0"<=b&&b<="7"?parseInt(a.substring(1),8):b==="u"||b==="x"?parseInt(a.substring(2),16):a.charCodeAt(1)}function e(a){if(a<32)return(a<16?"\\x0":"\\x")+a.toString(16);a=String.fromCharCode(a);if(a==="\\"||a==="-"||a==="["||a==="]")a="\\"+a;return a}function h(a){for(var f=a.substring(1,a.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),a=
[],b=[],o=f[0]==="^",c=o?1:0,i=f.length;c<i;++c){var j=f[c];if(/\\[bdsw]/i.test(j))a.push(j);else{var j=m(j),d;c+2<i&&"-"===f[c+1]?(d=m(f[c+2]),c+=2):d=j;b.push([j,d]);d<65||j>122||(d<65||j>90||b.push([Math.max(65,j)|32,Math.min(d,90)|32]),d<97||j>122||b.push([Math.max(97,j)&-33,Math.min(d,122)&-33]))}}b.sort(function(a,f){return a[0]-f[0]||f[1]-a[1]});f=[];j=[NaN,NaN];for(c=0;c<b.length;++c)i=b[c],i[0]<=j[1]+1?j[1]=Math.max(j[1],i[1]):f.push(j=i);b=["["];o&&b.push("^");b.push.apply(b,a);for(c=0;c<
f.length;++c)i=f[c],b.push(e(i[0])),i[1]>i[0]&&(i[1]+1>i[0]&&b.push("-"),b.push(e(i[1])));b.push("]");return b.join("")}function y(a){for(var f=a.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),b=f.length,d=[],c=0,i=0;c<b;++c){var j=f[c];j==="("?++i:"\\"===j.charAt(0)&&(j=+j.substring(1))&&j<=i&&(d[j]=-1)}for(c=1;c<d.length;++c)-1===d[c]&&(d[c]=++t);for(i=c=0;c<b;++c)j=f[c],j==="("?(++i,d[i]===void 0&&(f[c]="(?:")):"\\"===j.charAt(0)&&
(j=+j.substring(1))&&j<=i&&(f[c]="\\"+d[i]);for(i=c=0;c<b;++c)"^"===f[c]&&"^"!==f[c+1]&&(f[c]="");if(a.ignoreCase&&s)for(c=0;c<b;++c)j=f[c],a=j.charAt(0),j.length>=2&&a==="["?f[c]=h(j):a!=="\\"&&(f[c]=j.replace(/[A-Za-z]/g,function(a){a=a.charCodeAt(0);return"["+String.fromCharCode(a&-33,a|32)+"]"}));return f.join("")}for(var t=0,s=!1,l=!1,p=0,d=a.length;p<d;++p){var g=a[p];if(g.ignoreCase)l=!0;else if(/[a-z]/i.test(g.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){s=!0;l=!1;break}}for(var r=
{b:8,t:9,n:10,v:11,f:12,r:13},n=[],p=0,d=a.length;p<d;++p){g=a[p];if(g.global||g.multiline)throw Error(""+g);n.push("(?:"+y(g)+")")}return RegExp(n.join("|"),l?"gi":"g")}function M(a){function m(a){switch(a.nodeType){case 1:if(e.test(a.className))break;for(var g=a.firstChild;g;g=g.nextSibling)m(g);g=a.nodeName;if("BR"===g||"LI"===g)h[s]="\n",t[s<<1]=y++,t[s++<<1|1]=a;break;case 3:case 4:g=a.nodeValue,g.length&&(g=p?g.replace(/\r\n?/g,"\n"):g.replace(/[\t\n\r ]+/g," "),h[s]=g,t[s<<1]=y,y+=g.length,
t[s++<<1|1]=a)}}var e=/(?:^|\s)nocode(?:\s|$)/,h=[],y=0,t=[],s=0,l;a.currentStyle?l=a.currentStyle.whiteSpace:window.getComputedStyle&&(l=document.defaultView.getComputedStyle(a,q).getPropertyValue("white-space"));var p=l&&"pre"===l.substring(0,3);m(a);return{a:h.join("").replace(/\n$/,""),c:t}}function B(a,m,e,h){m&&(a={a:m,d:a},e(a),h.push.apply(h,a.e))}function x(a,m){function e(a){for(var l=a.d,p=[l,"pln"],d=0,g=a.a.match(y)||[],r={},n=0,z=g.length;n<z;++n){var f=g[n],b=r[f],o=void 0,c;if(typeof b===
"string")c=!1;else{var i=h[f.charAt(0)];if(i)o=f.match(i[1]),b=i[0];else{for(c=0;c<t;++c)if(i=m[c],o=f.match(i[1])){b=i[0];break}o||(b="pln")}if((c=b.length>=5&&"lang-"===b.substring(0,5))&&!(o&&typeof o[1]==="string"))c=!1,b="src";c||(r[f]=b)}i=d;d+=f.length;if(c){c=o[1];var j=f.indexOf(c),k=j+c.length;o[2]&&(k=f.length-o[2].length,j=k-c.length);b=b.substring(5);B(l+i,f.substring(0,j),e,p);B(l+i+j,c,C(b,c),p);B(l+i+k,f.substring(k),e,p)}else p.push(l+i,b)}a.e=p}var h={},y;(function(){for(var e=a.concat(m),
l=[],p={},d=0,g=e.length;d<g;++d){var r=e[d],n=r[3];if(n)for(var k=n.length;--k>=0;)h[n.charAt(k)]=r;r=r[1];n=""+r;p.hasOwnProperty(n)||(l.push(r),p[n]=q)}l.push(/[\S\s]/);y=L(l)})();var t=m.length;return e}function u(a){var m=[],e=[];a.tripleQuotedStrings?m.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]):a.multiLineStrings?m.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,
q,"'\"`"]):m.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]);a.verbatimStrings&&e.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]);var h=a.hashComments;h&&(a.cStyleComments?(h>1?m.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]):m.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),e.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,q])):m.push(["com",/^#[^\n\r]*/,
q,"#"]));a.cStyleComments&&(e.push(["com",/^\/\/[^\n\r]*/,q]),e.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q]));a.regexLiterals&&e.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]);(h=a.types)&&e.push(["typ",h]);a=(""+a.keywords).replace(/^ | $/g,
"");a.length&&e.push(["kwd",RegExp("^(?:"+a.replace(/[\s,]+/g,"|")+")\\b"),q]);m.push(["pln",/^\s+/,q," \r\n\t\xa0"]);e.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,q],["pun",/^.[^\s\w"-$'./@\\`]*/,q]);return x(m,e)}function D(a,m){function e(a){switch(a.nodeType){case 1:if(k.test(a.className))break;if("BR"===a.nodeName)h(a),
a.parentNode&&a.parentNode.removeChild(a);else for(a=a.firstChild;a;a=a.nextSibling)e(a);break;case 3:case 4:if(p){var b=a.nodeValue,d=b.match(t);if(d){var c=b.substring(0,d.index);a.nodeValue=c;(b=b.substring(d.index+d[0].length))&&a.parentNode.insertBefore(s.createTextNode(b),a.nextSibling);h(a);c||a.parentNode.removeChild(a)}}}}function h(a){function b(a,d){var e=d?a.cloneNode(!1):a,f=a.parentNode;if(f){var f=b(f,1),g=a.nextSibling;f.appendChild(e);for(var h=g;h;h=g)g=h.nextSibling,f.appendChild(h)}return e}
for(;!a.nextSibling;)if(a=a.parentNode,!a)return;for(var a=b(a.nextSibling,0),e;(e=a.parentNode)&&e.nodeType===1;)a=e;d.push(a)}var k=/(?:^|\s)nocode(?:\s|$)/,t=/\r\n?|\n/,s=a.ownerDocument,l;a.currentStyle?l=a.currentStyle.whiteSpace:window.getComputedStyle&&(l=s.defaultView.getComputedStyle(a,q).getPropertyValue("white-space"));var p=l&&"pre"===l.substring(0,3);for(l=s.createElement("LI");a.firstChild;)l.appendChild(a.firstChild);for(var d=[l],g=0;g<d.length;++g)e(d[g]);m===(m|0)&&d[0].setAttribute("value",
m);var r=s.createElement("OL");r.className="linenums";for(var n=Math.max(0,m-1|0)||0,g=0,z=d.length;g<z;++g)l=d[g],l.className="L"+(g+n)%10,l.firstChild||l.appendChild(s.createTextNode("\xa0")),r.appendChild(l);a.appendChild(r)}function k(a,m){for(var e=m.length;--e>=0;){var h=m[e];A.hasOwnProperty(h)?window.console&&console.warn("cannot override language handler %s",h):A[h]=a}}function C(a,m){if(!a||!A.hasOwnProperty(a))a=/^\s*</.test(m)?"default-markup":"default-code";return A[a]}function E(a){var m=
a.g;try{var e=M(a.h),h=e.a;a.a=h;a.c=e.c;a.d=0;C(m,h)(a);var k=/\bMSIE\b/.test(navigator.userAgent),m=/\n/g,t=a.a,s=t.length,e=0,l=a.c,p=l.length,h=0,d=a.e,g=d.length,a=0;d[g]=s;var r,n;for(n=r=0;n<g;)d[n]!==d[n+2]?(d[r++]=d[n++],d[r++]=d[n++]):n+=2;g=r;for(n=r=0;n<g;){for(var z=d[n],f=d[n+1],b=n+2;b+2<=g&&d[b+1]===f;)b+=2;d[r++]=z;d[r++]=f;n=b}for(d.length=r;h<p;){var o=l[h+2]||s,c=d[a+2]||s,b=Math.min(o,c),i=l[h+1],j;if(i.nodeType!==1&&(j=t.substring(e,b))){k&&(j=j.replace(m,"\r"));i.nodeValue=
j;var u=i.ownerDocument,v=u.createElement("SPAN");v.className=d[a+1];var x=i.parentNode;x.replaceChild(v,i);v.appendChild(i);e<o&&(l[h+1]=i=u.createTextNode(t.substring(b,o)),x.insertBefore(i,v.nextSibling))}e=b;e>=o&&(h+=2);e>=c&&(a+=2)}}catch(w){"console"in window&&console.log(w&&w.stack?w.stack:w)}}var v=["break,continue,do,else,for,if,return,while"],w=[[v,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],
"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],F=[w,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],G=[w,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],
H=[G,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],w=[w,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],I=[v,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],
J=[v,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],v=[v,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],K=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,N=/\S/,O=u({keywords:[F,H,w,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+
I,J,v],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),A={};k(O,["default-code"]);k(x([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),
["default-markup","htm","html","mxml","xhtml","xml","xsl"]);k(x([["pln",/^\s+/,q," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",
/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]);k(x([],[["atv",/^[\S\s]+/]]),["uq.val"]);k(u({keywords:F,hashComments:!0,cStyleComments:!0,types:K}),["c","cc","cpp","cxx","cyc","m"]);k(u({keywords:"null,true,false"}),["json"]);k(u({keywords:H,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:K}),["cs"]);k(u({keywords:G,cStyleComments:!0}),["java"]);k(u({keywords:v,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]);k(u({keywords:I,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),
["cv","py"]);k(u({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]);k(u({keywords:J,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]);k(u({keywords:w,cStyleComments:!0,regexLiterals:!0}),["js"]);k(u({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",
hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]);k(x([],[["str",/^[\S\s]+/]]),["regex"]);window.prettyPrintOne=function(a,m,e){var h=document.createElement("PRE");h.innerHTML=a;e&&D(h,e);E({g:m,i:e,h:h});return h.innerHTML};window.prettyPrint=function(a){function m(){for(var e=window.PR_SHOULD_USE_CONTINUATION?l.now()+250:Infinity;p<h.length&&l.now()<e;p++){var n=h[p],k=n.className;if(k.indexOf("prettyprint")>=0){var k=k.match(g),f,b;if(b=
!k){b=n;for(var o=void 0,c=b.firstChild;c;c=c.nextSibling)var i=c.nodeType,o=i===1?o?b:c:i===3?N.test(c.nodeValue)?b:o:o;b=(f=o===b?void 0:o)&&"CODE"===f.tagName}b&&(k=f.className.match(g));k&&(k=k[1]);b=!1;for(o=n.parentNode;o;o=o.parentNode)if((o.tagName==="pre"||o.tagName==="code"||o.tagName==="xmp")&&o.className&&o.className.indexOf("prettyprint")>=0){b=!0;break}b||((b=(b=n.className.match(/\blinenums\b(?::(\d+))?/))?b[1]&&b[1].length?+b[1]:!0:!1)&&D(n,b),d={g:k,h:n,i:b},E(d))}}p<h.length?setTimeout(m,
250):a&&a()}for(var e=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],h=[],k=0;k<e.length;++k)for(var t=0,s=e[k].length;t<s;++t)h.push(e[k][t]);var e=q,l=Date;l.now||(l={now:function(){return+new Date}});var p=0,d,g=/\blang(?:uage)?-([\w.]+)(?!\S)/;m()};window.PR={createSimpleLexer:x,registerLangHandler:k,sourceDecorator:u,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",
PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}})();
PR.registerLangHandler(PR.createSimpleLexer([[PR.PR_PLAIN,/^[\t\n\x0B\x0C\r ]+/,null,"\t\n\x0B\f\r "],[PR.PR_STRING,/^\"(?:[^\"\\\n\x0C\r]|\\[\s\S])*(?:\"|$)/,null,'"'],[PR.PR_LITERAL,/^(?:0o[0-7]+|0x[\da-f]+|\d+(?:\.\d+)?(?:e[+\-]?\d+)?)/i,null,"0123456789"]],[[PR.PR_COMMENT,/^(?:(?:--+(?:[^\r\n\x0C]*)?)|(?:\{-(?:[^-]|-+[^-\}])*-\}))/],[PR.PR_KEYWORD,/^(?:yield|lazy|inline|private|open|class|data|default|deriving|do|else|if|import|in|infix|infixl|infixr|instance|let|module|newtype|of|then|when|with|type|where|_)(?=[^a-zA-Z0-9\']|$)/,
null],[PR.PR_PLAIN,/^(?:[A-Z][\w\']*\.)*[a-zA-Z][\w\']*/],[PR.PR_PUNCTUATION,/^[^\t\n\x0B\x0C\r a-zA-Z0-9\'\"]+/]]),["hs"]);</script>
    <script>var f=void 0,j=!0;function k(){return function(h){return h}}function l(){return function(){}}var m;m=function(h){return h instanceof Array};var q;q=function(h){return h()};var x;x=function(h){throw h;};var B;B=function(){x("Pattern Match Exhausted")};var E;E=function(h,i){return h.hasOwnProperty(i)};var F;
F=new function(){function h(a){return function(b){return function(c){return a(b(c))}}}function i(a){return 0===a?0:1===a?1:i(a-1)+i(a-2)}function p(a){return function(b){return 0===a?l():function(){b();return p(a-1)(b)()}}}function d(a){return function(b){var c=a,g;if(c===b)return j;c=a;g=b;if("object"===typeof c){var s=j,e;for(e in c)s=s&&g.hasOwnProperty(e)&&d(c[e])(g[e]);c=Object.keys(c).length===Object.keys(g).length;return s&&c}c=a;g=b;if(m(c)){e=j;for(s in c)e=e&&d(c[s])(g[s]);return e&&c.length==
g.length}return!1}}this.not=function(a){return!a};this.object_=function(a){return"object"===typeof a};this.array_=m;this._eq_eq=d;this._bang_eq=function(a){return function(b){return!d(a)(b)}};this._perc=function(a){return function(b){return a%b}};this._and_and=function(a){return function(b){return a&&b}};this._star=function(a){return function(b){return a*b}};this._plus=function(a){return function(b){return a+b}};this._minu=function(a){return function(b){return a-b}};this._forw=function(a){return function(b){return a/
b}};this._forw_eq=function(a){return function(b){return!d(a)(b)}};this._less=function(a){return function(b){return a<b}};this._less_eq=function(a){return function(b){return a<=b}};this._grea=function(a){return function(b){return a>b}};this._grea_eq=function(a){return function(b){return a>=b}};this._grea_grea=function(a){return function(b){return function(){a();return b()}}};this._grea_grea_eq=function(a){return function(b){return function(){return b(a())()}}};this._exp=function(a){return function(b){return Math.pow(a,
b)}};this.cast=k();this.clone=function(a){return m(a)?function(){return $.extend(j,[],a)}:function(){return $.extend(j,{},a)}};this.do_times=p;this.fib=i;this.fmap=function(a){return function(b){return function(){var c=b();return a(c)}}};this.log=function(a){return function(){return console.log(a)}};this.num_=function(a){return"number"==typeof a};this.rand=function(a){return function(){return Math.floor(Math.random()*a)}};this._return_=function(a){return function(){return a}};this.string_=function(a){return"string"===
typeof a};this.type_=function(a){return typeof a};this._or_or=function(a){return function(b){return a||b}};this.$speedtest=new function(){function a(b){return 0===b?0:1===b?1:a(b-1)+a(b-2)}this.fast_fib=a;this.floor=Math.floor;this.get_time=function(){return(new Date).getTime()};this.time=function(a){return function(){var c=(new Date).getTime();a();return(new Date).getTime()-c}}};this._apos=function(a){return function(b){return b(a)}};this._comp_col=h;this._less_col=function(a){return function(b){return a(b)}};
this._less_or=function(a){return function(b){return a(b)}};this.flip=function(a){return function(b){return function(c){return a(c)(b)}}};this.id=k();this.ignore=function(a){return function(){a();return{}}};this._or_grea=function(a){return function(b){return b(a)}};this.$string=new function(){this._plus_plus_plus=function(a){return function(b){return""+a+b}};this.concat=function(a){return a.join("")};this.length=function(a){return a.length};this.lstrip=function(a){return a.replace(/^\s+/,"")};this.regex=
function(a){return function(b){return RegExp(a,b)}};this.replace=function(a){return function(b){return function(c){return c.replace(a,b)}}};this.rstrip=function(a){return a.replace(/\s+$/,"")};this.strip=h(function(a){return a.replace(/^\s+/,"")})(function(a){return a.replace(/\s+$/,"")});this.to_string=function(a){return a+""}};this.err=function(a){var b;try{a(),b=!1}catch(c){b=c}return b};this.$option=new function(){this.option=function(a){return function(b){if(E(b,"none"))return a;var c=b.some;
if(E(b,"some"))return c;B()}}};this.$html=new function(){function a(a){return function(b){return function(){return $(b.element).append($(a.element).detach())}}}function b(a){return function(){var b=$(a).get(0);return{add_class:function(a){return function(){return b.setAttribute("class",b.getAttribute("class")+" "+a)}},add_style:function(a){return function(g){return function(){b.style[a]=g}}},element:b,inner:function(){return b.innerHTML},on_click:function(a){return function(){b.onclick=a}},set:function(a){return function(){b.innerHTML=
a}}}}}function c(a){return function(b){return function(){return a.push(b)}}}this._bang_bang=function(a){return function(b){return a[b]}};this.$_plus=function(a){return function(b){return function(){return $(a).append(b)}}};this.$_comp=function(a){return function(b){return function(){return $(a).addClass(b)}}};this.$_eq=function(a){return function(b){return function(){if("undefined"!=typeof $){var g=$(a).get(0);"undefined"!=typeof g&&(g.innerHTML=b)}}}};this.$_or=function(a){return function(b){return function(g){return function(){return $(a).css(b,
g)}}}};this.push=c;var g={failed:0,messages:[],reportRunnerResults:function(){(0<g.failed?function(){return console.log(g.messages)}:function(){return{}})();return console.log(""+(g.total-g.failed)+("/"+g.total+" tests passed"))},reportSpecResults:function(a){var b=a.results().passed();g.total++;(!b?function(){g.failed++;c(g.messages)(a.description)();return{}}:function(){return{}})();return{}},total:0};this.console_reporter=g;this.split=function(a){return function(b){return b.split(a)}};this.stringify=
function(a){return JSON.stringify(a)};var e=0,h={reportRunnerResults:function(){"undefined"!=typeof phantom&&phantom.exit(e)},reportSpecResults:function(a){if(a.results().passed())a=function(){return{}};else var b=a.results_.items_,g=JSON.stringify(b[0].actual),c=a.description.split("__::__")[1],h=JSON.stringify(b[0].expected),i=JSON.stringify(function(a){return a+1}(function(a){return parseInt(a)}(function(a){return a[0]}(function(a){return a[0]}(a.description.split("__::__")).split("_"))))),a=function(){(d(e)(0)?
function(){return console.log("\r                                          ")}:function(){return{}})();e=1;console.log("Test failed at line "+i+("\n\n"+c+("\n\n    Expected "+h+("\n    Actual   "+g+""))));return console.log("")};return a()}};this.console_runner=function(){var a=jasmine.getEnv();a.addReporter(h);return a.execute()};this.div=function(a){return function(){return"<div id='"+a+"'/>"}};this.get=b;this.move=a;this.on_key=function(a){return function(b){return function(){return jQuery(window).keydown(function(g){g.keyCode==
a&&(g.preventDefault(),b())})}}};this.on_load=function(a){return function(){return window.addEventListener("load",a,!1)}};this.table_of_contents=function(){$(".test").css("position","relative");$(".test").css("left","50px");var c=new jasmine.TrivialReporter,d=new jasmine.FormlReporter,e=jasmine.getEnv();e.addReporter(c);e.addReporter(d);e.addReporter(g);e.execute();c=b(".jasmine_reporter")();d=b("#test_suite")();return a(c)(d)()};this.with_page=function(a){return function(){var b=$("body").clone(),
g=a();$("body").replaceWith(b);return g}}};this.$array=new function(){function a(a){return h(function(b){return b.reduce(function(b,c){return a(b)(c)})})(k())}function b(a){return function(d){return(a>d?c(b(d)(a)):function(){for(var b=[],c=a;c<=d;)b.push(c),c++;return b})()}}function c(a){return function(){a.reverse();return a}}this.unbox=k();this.reverse=c;this._comp_comp=b;this.reduce=a;this.all_=a(function(a){return function(b){return a&&b}});this.box=k();this.chain=function(a){return function(b){a(b);
return b}};this.for_each=function(a){return function(b){return function(){for(var c in b)a(parseInt(c))}}};this.get=function(a){return function(b){return b[a]}};this.length=h(function(a){return a.length})(k());this.map=function(a){return h(k())(h(function(b){return b.map(a)})(k()))};this.push_excl=function(a){return function(b){b.push(a);return b}};this.put=function(a){return function(b){return function(){var c=(m(b)?function(){return $.extend(j,[],b)}:function(){return $.extend(j,{},b)})();c.push(a);
return c}}};this.sequence=function(a){return function(){return a.map(q)}};this.set=function(a){return function(b){return function(c){return function(){c[a]=b;return c}}}};this.sum=a(function(a){return function(b){return a+b}});this.times=function(a){return function(c){function d(){return c}var e=a;if(0>e)return[];e=a;return h(k())(h(function(a){return a.map(d)})(k()))(b(0)(e-1))}};this.unshift_excl=function(a){return function(b){b.unshift(a);return b}};this.zip_with=function(a){return function(b){return function(c){var d=
[],e=h(function(a){d.push(a);return d})(h(function(d){return a(d(b))(d(c))})(function(a){return function(b){return b[a]}})),r;for(r in b)e(parseInt(r));return d}}}};var e;this.$list=e=new function(){function a(b){return function(c){var d=c;if(0===b)return{nil:j};d=c;return{head:u(d),tail:a(b-1)(t(d))}}}function b(a){return E(a,"nil")?{head:{nil:j},tail:{nil:j}}:{head:a,tail:b(t(a))}}function c(a){for(var b=f,c={nil:j};"undefined"==typeof b;){var d=c;if(E(a,"nil"))b=d;else{var d=c,e=a.head,g=a.tail;
E(a,"head")&&E(a,"tail")?(c={head:e,tail:d},a=g,b=f):B()}}return b}function d(a){if(E(a,"nil"))return 0;var b=a.tail;if(E(a,"head")&&E(a,"tail"))return 1+d(b);B()}function e(a){if(E(a,"nil"))return{head:{nil:j},tail:{nil:j}};var b=a.head,c=a.tail;if(E(a,"head")&&E(a,"tail"))return C({head:{nil:j},tail:{nil:j}})(r(function(a){return{head:b,tail:a}})(e(c)));B()}function i(a){return function(b){return 0===a?{nil:j}:{head:b,tail:i(a-1)(b)}}}function p(a){return function(b){function c(d){if(E(d,"nil"))return b;
var e=d.head,g=d.tail;if(E(d,"head")&&E(d,"tail"))return a(e)(c(g));B()}return c}}function y(a){return function(b){var c=a;if(E(b,"nil"))return{nil:j};var c=a,d=b;if(c(u(d)))return{head:u(d),tail:y(c)(t(d))};c=a;return y(c)(t(b))}}function r(a){return function(b){var c=a;if(E(b,"nil"))return{nil:j};c=a;return{head:c(u(b)),tail:r(c)(t(b))}}}function v(a){return function(b){return E(b,"nil")?x("Foldl1 called on empty list"):H(a)(u(b))(t(b))}}function t(a){var b=a.tail;if(E(a,"head")&&E(a,"tail"))return b;
if(E(a,"nil"))return x("Tail called on empty list");B()}function u(a){var b=a.head;if(E(a,"head")&&E(a,"tail"))return b;if(E(a,"nil"))return x("Head called on empty list");B()}function H(a){return function(b){return function(c){for(var d=f,e=b;"undefined"==typeof d;){var g=e;if(E(c,"nil"))d=g;else{var g=e,r=c.head,s=c.tail;E(c,"head")&&E(c,"tail")?(e=a(g)(r),c=s,d=f):B()}}return d}}}function C(a){return function(b){var c=b;if(E(a,"nil"))return c;var c=a.head,d=a.tail;if(E(a,"head")&&E(a,"tail"))return{head:c,
tail:C(d)(b)};B()}}this._col_col=function(a){return function(b){return{head:a,tail:b}}};this._plus_plus=C;this._comp_comp=function(a){return function(b){for(var c=f,d={nil:j};"undefined"==typeof c;){var c=b,e=d;c>=a?(b=c-1,d={head:c,tail:e},c=f):c=e=d}return c}};this.foldl=H;this.head=u;this.tail=t;this.foldl1=v;this.map=r;this.all_=function(a){return h(v(function(a){return function(b){return a&&b}}))(r(a))};this.any_=function(a){return h(v(function(a){return function(b){return a||b}}))(r(a))};var J=
v(function(a){return function(b){return C(a)(b)}});this.concat=J;this.concat_map=function(a){return function(b){return J(r(a)(b))}};this.drop=function(a){return function(b){for(var c=f,d=a;"undefined"==typeof c;)c=b,0!==d&&(c=b,d-=1,b=t(c),c=f);return c}};this.drop_while=function(a){return function(b){for(var c=f,d=a;"undefined"==typeof c;)if(c=d,E(b,"nil"))c={nil:j};else{var c=d,e=b;c(u(e))?(d=c,b=t(e),c=f):c=e=b}return c}};this.empty_=function(a){return E(a,"nil")?j:!1};this.filter=y;this.find=
function(a){return function(b){for(var c=f,d=a;"undefined"==typeof c;){var e=d;if(E(b,"nil"))c={none:j};else{var e=d,g=b.head;E(b,"head")&&E(b,"tail")&&e(g)?c={some:g}:(e=d,g=b.tail,E(b,"head")&&E(b,"tail")?(d=e,b=g,c=f):B())}}return c}};this.foldr=p;this.foldr1=function(a){return function(b){return E(b,"nil")?x("Foldr1 called on empty list"):p(a)(u(b))(t(b))}};this.init=i;this.inits=e;this.last=function(a){for(var b=f;"undefined"==typeof b;){var c=a.head;E(a,"head")&&E(a,"tail")&&E(a.tail,"nil")?
b=c:(c=a.tail,E(a,"head")&&E(a,"tail")?(a=c,b=f):E(a,"nil")?b=x("Last called on empty list"):B())}return b};this.length=d;this.maximum=v(function(a){return function(b){return a>b?a:b}});this.minimum=v(function(a){return function(b){return a>b?b:a}});this.partition=function(a){return p(function(b){return function(c){var d=c.head,e=c.tail;if(E(c,"head")&&E(c,"tail"))return c=u(e),a(b)?{head:{head:b,tail:d},tail:{head:c,tail:{nil:j}}}:{head:d,tail:{head:{head:b,tail:c},tail:{nil:j}}};B()}})({head:{nil:j},
tail:{head:{nil:j},tail:{nil:j}}})};this.product=v(function(a){return function(b){return a*b}});this.reverse=c;this.sum=v(function(a){return function(b){return a+b}});this.tails=b;this.take=a;this.take_apos=function(a){return function(b){for(var d=f,e=a,g={nil:j};"undefined"==typeof d;)if(d=g,0!==e)var r=b,d=g,e=e-1,b=t(r),g={head:u(r),tail:d},d=f;return c(d)}};this.take_while=function(a){return function(b){var c=a;if(E(b,"nil"))return{nil:j};c=a;return c(u(b))?{head:u(b),tail:y(c)(t(b))}:{nil:j}}}};
this.$seq=new function(){function a(b){if(E(b,"end"))return{nil:j};var c=b.seq;if(E(b,"seq")){var b=c(),d=b.elem,e=b.next;E(b,"elem")&&E(b,"next")?b=function(){return{head:d,tail:a(e)}}:(B(),b=f);return b()}B()}function b(a){return function(c){return{seq:function(){return{elem:c,next:b(a)(a(c))}}}}}function c(a){if(E(a,"nil"))return{end:j};var b=a.head,d=a.tail;if(E(a,"head")&&E(a,"tail"))return{seq:function(){return{elem:b,next:c(d)}}};B()}function d(a){return function(b){return function(c){if(E(b,
"end")||E(c,"end"))return{end:j};var e=b.seq,s=c.seq;if(E(b,"seq")&&E(c,"seq"))return{seq:function(){var b;b=e();var c=b.elem,i=b.next;E(b,"elem")&&E(b,"next")?b=function(){var b;b=s();var e=b.elem,h=b.next;E(b,"elem")&&E(b,"next")?b=function(){return{elem:a(c)(e),next:d(a)(i)(h)}}:(B(),b=f);return b()}:(B(),b=f);return b()}};B()}}}function s(a){if(E(a,"end"))return{end:j};var b=a.seq;if(E(a,"seq")){var c=f;return{seq:function(){if(!c){var a;a=b();var d=a.elem,e=a.next;E(a,"elem")&&E(a,"next")?a=
function(){return{elem:d,next:s(e)}}:(B(),a=f);c=a()}return c}}}B()}var i=e.tail||("undefined"==typeof global?window:global).tail,h=e.take||("undefined"==typeof global?window:global).take;this.seq=function(a){return{seq:a}};this._col_col_col=function(a){return function(b){return{seq:function(){return{elem:a,next:b()}}}}};this.to_lazy=s;this.zip_with=d;this.tail=i=function(a){if(E(a,"end"))return x("tail called on empty seq");var b=a.seq;if(E(a,"seq"))return b().next;B()};var p=s({seq:function(){return{elem:1,
next:{seq:function(){return{elem:1,next:d(function(a){return function(b){return a+b}})(p)(i(p))}}}}}});this.fibs=p;this.from_list=c;this.iterate=b;this.take=h=function(a){return function(b){if(E(b,"end")||0===a)return{end:j};var c=b.seq;if(E(b,"seq"))return{seq:function(){var b;b=c();var d=b.elem,e=b.next;E(b,"elem")&&E(b,"next")?b=function(){return{elem:d,next:h(a-1)(e)}}:(B(),b=f);return b()}};B()}};this.to_list=a};this.$Forml_Z=new function(){var a=e.map||("undefined"==typeof global?window:global).map,
b=e.concat_map||("undefined"==typeof global?window:global).concat_map;this.bind=function(a){return function(b){var c=a.ret;if(E(a,"ret"))return c(b);B()}};this.js_monad={_grea_grea_eq:function(a){return function(b){return function(){return b(a())()}}},_return_:function(a){return function(){return a}}};var c={map:function(a){return function(b){if(E(b,"nil"))return{nil:j};var d=b.head,e=b.tail;if(E(b,"head")&&E(b,"tail"))return{head:a(d),tail:c.map(a)(e)};B()}}};this.list_functor=c;this.list_monad=
{_grea_grea_eq:function(a){return function(c){return b(c)(a)}},_return_:function(a){return{head:a,tail:{nil:j}}}};this.map=a=function(a){return function(b){return function(c){return a.map(c)(b)}}}}};("undefined"==typeof global?window:global).$prelude=F;
("undefined"==typeof global?window:global).$readme=new function(){function h(d){var e=d.head,a=d.tail;if(E(d,"head")&&E(d,"tail"))return e+h(a);if(E(d,"nil"))return 0;B()}function i(d){return 0===d?0:1===d?1:i(d-1)+i(d-2)}var p=F.fib||("undefined"==typeof global?window:global).fib;this._star_star=function(d){return function(e){for(var a=f,b=d,c=e,e="";"undefined"==typeof a;)if(a=e,0!==c)var g=b,a=e,b=g,c=c-1,e=""+a+g,a=f;return a}};this._plus_star=function(d){return function(e){return 2*d+2*e}};this.add=
function(d){return function(e){return d+e}};this.add_twelve=function(d){return function(e){return d+e+12}};this.fib=p=function(d){return 0===d?0:1===d?1:p(d-1)+p(d-2)};this.fib_apos=i;this.has_value=function(d){return E(d,"just")?j:!1};this.hello_world=function(){console.log("Hello World");return Math.sqrt(9)+1+1};this.sqrt=function(d){return Math.sqrt(d)};this.square=function(d){return d*d};this.magnitude=function(d){var e=d.x,a=d.y;if(E(d,"x")&&E(d,"y"))return Math.sqrt(e*e+a*a);B()};this.map=function(d){return function(e){return e.map(d)}};
this.maybe=function(d){return function(e){var a=d,a=e.just;if(E(e,"just"))return a;a=d;if(E(e,"nothing"))return a;B()}};this.mmap=function(d){return function(e){return function(a){return d.map(e)(a)}}};this.num_or_string=function(d){return"number"==typeof d?"Num":"String"};this.person=function(d){return function(e){return{address:e,message:""+d+(" lives at "+e+""),name:d,say:function(a){return""+d+(" says '"+a+"'")}}}};this.point={x:10,y:10};this.sum=h;this.unwrap=function(d){var e=d.box;if(E(d,"box"))return e;
B()};this.whenever=function(d){return function(e){return d?e:{}}}};
("undefined"==typeof global?window:global).$parsec=new function(){var h=F._eq_eq||("undefined"==typeof global?window:global)._eq_eq;this._star_grea=function(d){return function(e){var a=d.parser,b=e.parser;if(E(d,"parser")&&E(e,"parser"))return{parser:function(c){var c=a(c),d=c.parsed.some,d=c.rest;E(c,"parsed")&&E(c,"rest")&&E(c.parsed,"some")?c=b(d):(d=c.rest,E(c,"parsed")&&E(c,"rest")&&E(c.parsed,"none")?c={parsed:{none:j},rest:d}:(B(),c=f));return c}};B()}};var i;this._less$_grea=i=function(d){return function(e){var a=
e.parser;if(E(e,"parser"))return{parser:function(b){var b=a(b),c=b.parsed.some,e=b.rest;E(b,"parsed")&&E(b,"rest")&&E(b.parsed,"some")?b={parsed:{some:d(c)},rest:e}:(c=b.rest,E(b,"parsed")&&E(b,"rest")&&E(b.parsed,"none")?b={parsed:{none:j},rest:c}:(B(),b=f));return b}};B()}};this._less_star_grea=function(d){return function(e){var a=d.parser,b=e.parser;if(E(d,"parser")&&E(e,"parser"))return{parser:function(c){var d=a(c),c=d.parsed.some,e=d.rest;if(E(d,"parsed")&&E(d,"rest")&&E(d.parsed,"some")){var d=
b(e),e=d.parsed.some,i=d.rest;E(d,"parsed")&&E(d,"rest")&&E(d.parsed,"some")?c={parsed:{some:c(e)},rest:i}:(e=d.rest,E(d,"parsed")&&E(d,"rest")&&E(d.parsed,"none")?c={parsed:{none:j},rest:e}:(B(),c=f))}else c=d.rest,E(d,"parsed")&&E(d,"rest")&&E(d.parsed,"none")?c={parsed:{none:j},rest:c}:(B(),c=f);return c}};B()}};this._less_or_grea=function(d){return function(e){var a=d.parser,b=e.parser;if(E(d,"parser")&&E(e,"parser"))return{parser:function(c){var d=a(c),e=d.rest;return E(d,"parsed")&&E(d,"rest")&&
E(d.parsed,"none")&&h(c)(e)?b(c):d}};B()}};this.lift=function(d){return function(e){var a=e.parser;if(E(e,"parser"))return{parser:function(b){var c=a(b);return d({f:a,f_apos:c,parsed:c.parsed,rest:c.rest,text:b})}};B()}};var p;this.many=p=function(d){var e=d.parser;if(E(d,"parser"))return{parser:function(a){var b=e(a);var c=a={f:e,f_apos:b,parsed:b.parsed,rest:b.rest,text:a};E(a,"parsed")&&E(a.parsed,"none")?a={parsed:{some:[]},rest:c.rest}:(c=a.parsed.some,E(a,"parsed")&&E(a.parsed,"some")?a=i(function(a){a.push(c);
return a})(p({parser:a.f})).parser(a.rest):(B(),a=f));return a}};B()};this.run_parser=function(d){return function(e){var a=d.parser;if(E(d,"parser"))return e=a(e),a=e.parsed.some,E(e,"parsed")&&E(e.parsed,"some")?{some:a}:{none:j};B()}};this.string=function(d){return{parser:function(e){var a=e.substring(0,d.length);return h(a)(d)?{parsed:{some:d},rest:e.substring(d.length)}:{parsed:{none:j},rest:e}}}};this.try_apos=function(d){var e=d.parser;if(E(d,"parser"))return{parser:function(a){var b=e(a);a=
{f:e,f_apos:b,parsed:b.parsed,rest:b.rest,text:a};a=E(a,"parsed")&&E(a.parsed,"none")?{parsed:{none:j},rest:a.text}:a.f_apos;return a}};B()};this.$Testing=new (l())};
("undefined"==typeof global?window:global).$Benchmarks_for_the_prelude=new function(){function h(a){for(var b=f;"undefined"==typeof b;)if(b=a,3>b)b=0;else{var b=a,c=f;i(b%3)(0)||i(b%5)(0)?c=1+h(b-1):(a=b-1,c=f);b=c}return b}var i=F._eq_eq||("undefined"==typeof global?window:global)._eq_eq,p=F.$list._comp_comp||("undefined"==typeof global?window:global)._comp_comp,d=F.$list.filter||("undefined"==typeof global?window:global).filter,e=F.$list.sum||("undefined"==typeof global?window:global).sum;this.euler_1=
function(a){return function(){for(var b=0,c=1;c<a;){if(0==c%3||0==c%5)b+=c;c++}return b}};this.euler_2=function(a){return function(b){for(var c=f,d=a;"undefined"==typeof c;){var c=d,e=b;3>c?c=e:(c=d,e=b,i(c%3)(0)||i(c%5)(0)?(d=c-1,b=e+1):(c=d,e=b,d=c-1,b=e),c=f)}return c}};this.euler_3=h;this.euler_4=function(a){return function(){return e(d(function(a){return i(a%3)(0)||i(a%5)(0)})(p(1)(a)))}};this.euler_5=function(a){return function(b){for(var c=f,d=a;"undefined"==typeof c;){var c=d,e=b;3>c?c=e:
(c=d,e=b,0==c%3||0==c%5?(d=c-1,b=e+1):(c=d,e=b,d=c-1,b=e),c=f)}return c}};this.title=function(a){return function(){console.log("\r                                  ");console.log(a);return j}}};("undefined"==typeof global?window:global).$Tests_for_partial_records=new (l());var N;
N=new function(){this.rev_1=function(i){for(var h=f,d={nil:j};"undefined"==typeof h;){var e=d;if(E(i,"nil"))h=e;else{var e=d,a=i.head,b=i.tail;E(i,"head")&&E(i,"tail")?(d={head:a,tail:e},i=b,h=f):B()}}return h};var h={nil:j};this.rev_2=function(i){for(var p=f,d=h;"undefined"==typeof p;){var e=d;if(E(i,"nil"))p=e;else{var e=d,a=i.head,b=i.tail;E(i,"head")&&E(i,"tail")?(d={head:a,tail:e},i=b,p=f):B()}}return p};this.test_x={head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{head:5,tail:{head:6,tail:{head:7,
tail:{nil:j}}}}}}}}};("undefined"==typeof global?window:global).$Tests_for_TCO_bugs=N;("undefined"==typeof global?window:global).$Tests_for_typing_bugs=new function(){function h(h){return i(h)-1}function i(i){return h(i)+1}this.ff=i;this.gg=h};("undefined"==typeof global?window:global).$Tests_for_parser_bugs=new (l());
("undefined"==typeof global?window:global).$Test_that_definition_names_dont_collide_with_namespaces=new function(){this.$nametest=new function(){this.x=1};this.nametest={};this.$Seperator=new (l())};var O;
O=new function(){function h(a){return function(){var b=a.piece,c=i(a.piece)();a.piece=c;return(r(a)?function(){if("undefined"!=typeof $){var b=$("#board").get(0);"undefined"!=typeof b&&(b.innerHTML=G(a))}}:function(){a.piece=b})()}}function i(a){function b(a){return function(c){return function(d){return function(e){return d<n(function(a){return a.length})(k())(c)?function(){var w=(m(a)?function(){return $.extend(j,[],a)}:function(){return $.extend(j,{},a)})();w.push(c[d][e]);return b(w)(c)(d+1)(e)()}:
function(){return P(a)()}}}}}return function(){var c=b([])(a)(0);return n(k())(n(function(a){return a.map(c)})(k()))(A(0)(n(function(a){return a.length})(k())(a[0])-1)).map(q)}}function p(){var a=y(0)();return{board:M(20)(function(){return M(10)(-1)}).map(q),level:1,piece:a,score:0,timer:0,x:3,y:0}}function d(){return jQuery("#game").html()}function e(b){return function(c){return function(){function d(a){return function(){for(var c in b.board[a]){var d=parseInt(c);b.board[a][d]=b.board[a-1][d]}}}
b.score+=100;(z(b.score%1E3)(0)?function(){b.level+=1}:function(){return{}})();a(b)();n(k())(n(function(a){return a.map(d)})(k()))(A(c)(1)).map(q);return{}}}}function a(a){return function(){if("undefined"!=typeof $){var c=$("#score").get(0);"undefined"!=typeof c&&(c.innerHTML=t(a.score))}"undefined"!=typeof $&&(c=$("#level").get(0),"undefined"!=typeof c&&(c.innerHTML=a.level));$("#board").css("background-color",D[a.level-1][0]);$("#board").css("border-color",D[a.level-1][1]);v(a)();c=s(400*Math.pow(0.7,
a.level))(b(a))();return g(c)(a)()}}function b(a){return function(){a.y+=1;(!r(a)?function(){a.y-=1;L(a)();return c(a)()}:function(){return{}})();if("undefined"!=typeof $){var b=$("#board").get(0);"undefined"!=typeof b&&(b.innerHTML=G(a))}}}function c(a){return function(){for(var b in a.board)(function(b){function c(a){return!z(a)(-1)}var d=Q(function(a){return function(b){return a&&b}}),h;h=n(k())(n(function(a){return a.map(c)})(k()));return(d(h(a.board[b]))?e(a)(b):function(){return{}})()})(parseInt(b))}}
function g(a){return function(b){return function(){b.timer=a}}}function s(a){return function(b){return function(){return setInterval(b,a)}}}function G(a){var b=a.board,c=a.level,d=a.piece,e=a.x,h=a.y;if(E(a,"board")&&E(a,"level")&&E(a,"piece")&&E(a,"x")&&E(a,"y")){var g=function(a){return function(i){var g=a,w=i;if(!z(b[w][g])(-1))return"<div style='"+("top:"+30*w+("px;\nleft:"+30*g+("px;\nbackground-color:"+D[c-1][2+b[w][g]]+";")))+"' class='cell'></div>";g=a;w=i;return 0<=g-e&&g-e<n(function(a){return a.length})(k())(d[0])&&
0<=w-h&&w-h<n(function(a){return a.length})(k())(d)&&!z(d[w-h][g-e])(-1)?"<div style='"+("top:"+30*w+("px;\nleft:"+30*g+("px;\nbackground-color:"+D[c-1][d[w-h][g-e]+2]+";")))+"' class='cell'></div>":""}},i=[],a=n(function(a){i.push(a);return i})(n(function(a){function b(){return A(0)(9)}var c=a(A(0)(19)),d=n(u)(n(n(k())(n(function(a){return a.map(function(a){return a(c)})})(k())))(n(k())(n(function(a){return a.map(g)})(k())))),e;e=n(k())(n(function(a){return a.map(b)})(k()));return d(a(e(A(0)(19))))})(function(a){return function(b){return b[a]}})),
p;for(p in A(0)(19))a(parseInt(p));return u(i)}B()}function L(a){return function(){for(var b in a.piece)(function(b){for(var c in a.piece[b])(function(c){return(!z(a.piece[b][c])(-1)&&20>=a.y+b&&10>=a.x+c?function(){a.board[a.y+b][a.x+c]=a.piece[b][c]}:function(){return{}})()})(parseInt(c))})(parseInt(b));b=y(a.level-1)();a.piece=b;a.x=3;a.y=0}}function y(a){return function(){var b=Math.floor(Math.random()*n(function(a){return a.length})(k())(K)),c=Math.floor(Math.random()*(n(function(a){return a.length})(k())(D[a])-
2)),b=K[b],d=n(k())(n(function(a){return a.map(function(a){return 0===a?c:-1})})(k()));return n(k())(n(function(a){return a.map(d)})(k()))(b)}}function r(a){var b=a.board,c=a.piece,d=a.x,e=a.y;if(E(a,"board")&&E(a,"piece")&&E(a,"x")&&E(a,"y")){var g=function(a){return function(b){var c;c=n(k())(n(function(b){return b.map(a)})(k()));return R(c(A(0)(b-1)))}};return 0<=d&&10>=d+n(function(a){return a.length})(k())(c[0])&&20>=e+n(function(a){return a.length})(k())(c)&&g(function(a){return g(function(g){var h=
!z(b[e+a][d+g])(-1);return!(!z(c[a][g])(-1)&&h)})(n(function(a){return a.length})(k())(c[a]))})(n(function(a){return a.length})(k())(c))}B()}function v(a){var b=a.timer;if(E(a,"timer"))return function(){return clearInterval(b)};B()}function t(a){return C(H("(\\d)(?=(\\d\\d\\d)+(?!\\d))")("g"))("$1,")(J(a))}var u=F.$string.concat||("undefined"==typeof global?window:global).concat,H=F.$string.regex||("undefined"==typeof global?window:global).regex,C=F.$string.replace||("undefined"==typeof global?window:
global).replace,J=F.$string.to_string||("undefined"==typeof global?window:global).to_string,z=F._eq_eq||("undefined"==typeof global?window:global)._eq_eq,n=F._comp_col||("undefined"==typeof global?window:global)._comp_col,I=F.$html.move||("undefined"==typeof global?window:global).move,P=F.$array.reverse||("undefined"==typeof global?window:global).reverse,A=F.$array._comp_comp||("undefined"==typeof global?window:global)._comp_comp,Q=F.$array.reduce||("undefined"==typeof global?window:global).reduce,
R=F.$array.all_||("undefined"==typeof global?window:global).all_,M=F.$array.times||("undefined"==typeof global?window:global).times;this.at=function(a){return function(b){return function(c){return!z(c[b][a])(-1)}}};this.block_string=function(a){return function(b){return function(c){return"<div style='"+("top:"+30*b+("px;\nleft:"+30*a+("px;\nbackground-color:"+c+";")))+"' class='cell'></div>"}}};this.to_commas=t;var D=[["#0C3555","#08789E","#76F61E","#F7D909","#E11E6A"],["#320010","#74220F","#B8A04E",
"#E1D46C","#80611D"],["#542437","#53777A","#C02942","#D95B43","#53777A"]];this.colors=D;this.stop_timer=v;this.n_columns=9;this.n_rows=19;this.is_valid=r;this.paint=function(a){return function(b){return function(c){return function(d){return function(){a.board[b][c]=d}}}}};var K;this.pieces=K=[[[0],[0],[0],[0]],[[0,-1],[0,-1],[0,0]],[[-1,0],[-1,0],[0,0]],[[0,0],[0,0]],[[-1,0,-1],[0,0,0]],[[0,0,-1],[-1,0,0]],[[-1,0,0],[0,0,-1]]];this.random_piece=y;this.new_piece=L;this.draw=G;this.every=s;this.set_timer=
g;this.clear_lines=c;this.tick=b;this.draw_board=a;this.clear_row=e;this.game_template=d;this.move=I=function(a){return function(b){return function(c){return function(){c.x+=a;c.y+=b;(r(c)?function(){if("undefined"!=typeof $){var a=$("#board").get(0);"undefined"!=typeof a&&(a.innerHTML=G(c))}}:function(){c.x-=a;c.y-=b})();return c}}}};this.new_board=p;this.rotate=i;this.rot=h;this.play=function(){var b=d(),c=p();$("body").append(b);a(c)();jQuery(window).keydown(function(a){37==a.keyCode&&(a.preventDefault(),
I(-1)(0)(c)())});jQuery(window).keydown(function(a){38==a.keyCode&&(a.preventDefault(),h(c)())});jQuery(window).keydown(function(a){39==a.keyCode&&(a.preventDefault(),I(1)(0)(c)())});return jQuery(window).keydown(function(a){40==a.keyCode&&(a.preventDefault(),I(0)(1)(c)())})};this.with_board=function(a){var b=p(),a=a(b);v(b)();return a}};("undefined"==typeof global?window:global).$tetris=O;
 var is_array;is_array=function(c){return c instanceof Array};var __undefined__;__undefined__="undefined";var run;run=function(c){return c()};var error;error=function(c){throw c;};var exhaust;exhaust=function(){error("Pattern Match Exhausted")};var __check;__check=function(c,h){return c.hasOwnProperty(h)};
describe("",function(){describe("prelude",function(){var c=$prelude._eq_eq,h=$prelude.fib,j;j=$prelude.$speedtest;var d=$prelude._comp_col,l=$prelude.err,q;q=$prelude.$option;var g;g=$prelude.$list;c=$prelude._eq_eq;h=$prelude.fib;j=$prelude.$speedtest;d=$prelude._comp_col;l=$prelude.err;q=$prelude.$option;g=$prelude.$list;new function(){describe("speedtest",function(){var a=$prelude.$speedtest.floor,b=$prelude.$speedtest.time,a=$prelude.$speedtest.floor,b=$prelude.$speedtest.time;new function(){it("194_194__::__            fast_fib 7 == fib 7",
function(){expect(function(){var a=function(b){return 0===b?0:1===b?1:a(b-1)+a(b-2)};return a}()(7)).toEqual(h(7))});it("203_205multi__::__            do! fast_time <- time yield fast_fib 30\n                slow_time <- time yield fib 30\n                return (floor (fast_time / slow_time * 100) >= 80)",function(){expect(function(){try{var c;var e=b(function(){var a=function(b){return 0===b?0:1===b?1:a(b-1)+a(b-2)};return a(30)})(),f=b(function(){return h(30)})();c=80<=a(100*(e/f));return c}catch(k){return{error:k}}}()).toEqual(!0)})}});
describe("string",function(){new function(){it('267_267__::__            strip "    test    " is "test"',function(){expect(d(function(a){a=a.replace(/^\s+/,"");return a})(function(a){a=a.replace(/\s+$/,"");return a})("    test    ")).toEqual("test")});it('271_272multi__::__            let x = "test"\n            in "hello `x`" is "hello test"',function(){expect(function(){try{return c("hello test")("hello test")}catch(a){return{error:a}}}()).toEqual(!0)})}});describe("option",function(){var a=$prelude.$option.option,
a=$prelude.$option.option;new function(){it("308_308__::__            {none} == {none}",function(){expect({none:!0}).toEqual({none:!0})});it("309_309__::__            {some: 2} == {some: 2}",function(){expect({some:2}).toEqual({some:2})});it("310_310__::__            option 3 {some: 2} == 2",function(){expect(a(3)({some:2})).toEqual(2)})}});describe("html",function(){var a=$prelude.$html.div,b=$prelude.$html.get,a=$prelude.$html.div,b=$prelude.$html.get;new function(){it('398_408multi__::__            do! d <- div "test1"\n    \n                "body"   $+ d\n                "#test1" $= "I am a test!"\n    \n                text <- get "#test1"\n                text <- text.inner\n    \n                "#test1" $= ""\n    \n                return (text == "I am a test!")',
function(){expect(function(){try{var i;var e=a("test1")();$("body").append(e);if("undefined"!=typeof $){var f=$("#test1").get(0);"undefined"!=typeof f&&(f.innerHTML="I am a test!")}var k=b("#test1")().inner();if("undefined"!=typeof $){var m=$("#test1").get(0);"undefined"!=typeof m&&(m.innerHTML="")}i=c(k)("I am a test!");return i}catch(I){return{error:I}}}()).toEqual(!0)})}});describe("array",function(){var a=$prelude.$array.reverse,b=$prelude.$array._comp_comp,i=$prelude.$array.reduce,e=$prelude.$array.times,
a=$prelude.$array.reverse,b=$prelude.$array._comp_comp,i=$prelude.$array.reduce,e=$prelude.$array.times;new function(){it("604_604__::__            [3, 2, 1] == do! reverse [1, 2, 3]",function(){expect([3,2,1]).toEqual(a([1,2,3])())});it("606_608multi__::__            let x = []\n                _ = push! 1 x\n            x == [1]",function(){expect(function(){try{var a=[];a.push(1);return c(a)([1])}catch(b){return{error:b}}}()).toEqual(!0)});it("610_610__::__            1 .. 3 == [1, 2, 3]",function(){expect(b(1)(3)).toEqual([1,
2,3])});it("611_611__::__            3 .. 1 == [3, 2, 1]",function(){expect(b(3)(1)).toEqual([3,2,1])});it("613_613__::__            reduce (&&) [true, true, true]",function(){expect(function(){try{return i(function(a){return function(b){b=a&&b;return b}})([!0,!0,!0])}catch(a){return{error:a}}}()).toEqual(!0)});it("615_615__::__            5 'times 5 == [5, 5, 5, 5, 5]",function(){expect(e(5)(5)).toEqual([5,5,5,5,5])});it("617_617__::__            [1, 2, 3] == do! put 3 [1, 2]",function(){expect([1,
2,3]).toEqual(function(){var a=(is_array([1,2])?function(){return $.extend(!0,[],[1,2])}:function(){return $.extend(!0,{},[1,2])})();a.push(3);return a}())});it("619_619__::__            map (.x) [{x: 1}, {x: 2}] == [1, 2]",function(){expect(function(a){return d(function(a){return a})(d(function(b){return b.map(a)})(function(a){return a}))}(function(a){return a.x})([{x:1},{x:2}])).toEqual([1,2])});it("621_621__::__            zip_with (\\x y = x + y) [1, 2, 3] [3, 2, 1] == [4, 4, 4]",function(){expect(function(){var a=
[],b=d(function(b){a.push(b);return a})(d(function(a){var b=a([1,2,3]);a=a([3,2,1]);return b+a})(function(a){return function(b){b=b[a];return b}}));for(var c in[1,2,3])b(parseInt(c));return a}()).toEqual([4,4,4])})}});describe("list",function(){var a=$prelude.$list._plus_plus,b=$prelude.$list._comp_comp,i=$prelude.$list.foldl,e=$prelude.$list.head,f=$prelude.$list.tail,k=$prelude.$list.map,m=$prelude.$list.all_,d=$prelude.$list.any_,g=$prelude.$list.concat,B=$prelude.$list.concat_map,C=$prelude.$list.drop,
r=$prelude.$list.drop_while,s=$prelude.$list.empty_,h=$prelude.$list.filter,n=$prelude.$list.find,D=$prelude.$list.foldr,j=$prelude.$list.init,t=$prelude.$list.inits,u=$prelude.$list.last,v=$prelude.$list.length,E=$prelude.$list.maximum,F=$prelude.$list.minimum,w=$prelude.$list.partition,G=$prelude.$list.product,p=$prelude.$list.reverse,x=$prelude.$list.sum,y=$prelude.$list.tails,z=$prelude.$list.take,H=$prelude.$list.take_apos,A=$prelude.$list.take_while,J=q.option||("undefined"==typeof global?window:
global).option,a=$prelude.$list._plus_plus,b=$prelude.$list._comp_comp,i=$prelude.$list.foldl,e=$prelude.$list.head,f=$prelude.$list.tail,k=$prelude.$list.map,m=$prelude.$list.all_,d=$prelude.$list.any_,g=$prelude.$list.concat,B=$prelude.$list.concat_map,C=$prelude.$list.drop,r=$prelude.$list.drop_while,s=$prelude.$list.empty_,h=$prelude.$list.filter,n=$prelude.$list.find,D=$prelude.$list.foldr,j=$prelude.$list.init,t=$prelude.$list.inits,u=$prelude.$list.last,v=$prelude.$list.length,E=$prelude.$list.maximum,
F=$prelude.$list.minimum,w=$prelude.$list.partition,G=$prelude.$list.product,p=$prelude.$list.reverse,x=$prelude.$list.sum,y=$prelude.$list.tails,z=$prelude.$list.take,H=$prelude.$list.take_apos,A=$prelude.$list.take_while;new function(){it("648_662multi__::__            var xs = [:\n    \n                [:1,2,3]\n    \n                [:1,2,3:]\n    \n                (1::2::3::{nil})\n    \n                { head = 1\n                  tail = { head = 2\n                           tail = { head = 3\n                                    tail = {nil} }}}\n            ]\n    \n            all? (\u03bby = [:1,2,3] == y) xs",
function(){expect(function(){try{return m(function(a){return c({head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}})(a)})({head:{head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}},tail:{head:{head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}},tail:{head:{head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}},tail:{head:{head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}},tail:{nil:!0}}}}})}catch(a){return{error:a}}}()).toEqual(!0)});it("689_689__::__            1 .. 5 == [:1,2,3,4,5]",function(){expect(b(1)(5)).toEqual({head:1,
tail:{head:2,tail:{head:3,tail:{head:4,tail:{head:5,tail:{nil:!0}}}}}})});it("693_693__::__            288045 == 1 .. 1111 |> filter (\u03bbx = x % 3 == 0 || x % 5 == 0) |> sum",function(){expect(288045).toEqual(x(h(function(a){a=c(a%3)(0)||c(a%5)(0);return a})(b(1)(1111))))});it("710_710__::__            not (empty? (1 :: {nil}))",function(){expect(function(){try{var a;a=!s({head:1,tail:{nil:!0}});return a}catch(b){return{error:b}}}()).toEqual(!0)});it("711_711__::__            empty? [:]",function(){expect(function(){try{return s({nil:!0})}catch(a){return{error:a}}}()).toEqual(!0)});
it("713_713__::__            head [: 1, 2 ] is 1",function(){expect(e({head:1,tail:{head:2,tail:{nil:!0}}})).toEqual(1)});it("714_714__::__            tail [: 1, 2 ] is [:2]",function(){expect(f({head:1,tail:{head:2,tail:{nil:!0}}})).toEqual({head:2,tail:{nil:!0}})});it("715_715__::__            last [: 1, 2 ] is 2",function(){expect(u({head:1,tail:{head:2,tail:{nil:!0}}})).toEqual(2)});it('717_717__::__            err (lazy head {nil}) is "Head called on empty list"',function(){expect(l(function(){var a=
void 0;return function(){a||(a=e({nil:!0}));return a}}())).toEqual("Head called on empty list")});it('718_718__::__            err (lazy tail {nil}) is "Tail called on empty list"',function(){expect(l(function(){var a=void 0;return function(){a||(a=f({nil:!0}));return a}}())).toEqual("Tail called on empty list")});it('719_719__::__            err (lazy last {nil}) is "Last called on empty list"',function(){expect(l(function(){var a=void 0;return function(){a||(a=u({nil:!0}));return a}}())).toEqual("Last called on empty list")});
it("721_721__::__            take(2, [: 1, 2, 3 ]) == [: 1, 2 ]",function(){expect(z(2)({head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}})).toEqual({head:1,tail:{head:2,tail:{nil:!0}}})});it("722_722__::__            drop(2, [: 1, 2, 3 ]) == [: 3 ]",function(){expect(C(2)({head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}})).toEqual({head:3,tail:{nil:!0}})});it("724_724__::__            take_while (\u03bbx = x < 0) [:] == [:]",function(){expect(A(function(a){return 0>a})({nil:!0})).toEqual({nil:!0})});
it("725_725__::__            take_while (\u03bbx = x > 0) [: 2, 1, 0 ] == [: 2, 1 ]",function(){expect(A(function(a){return 0<a})({head:2,tail:{head:1,tail:{head:0,tail:{nil:!0}}}})).toEqual({head:2,tail:{head:1,tail:{nil:!0}}})});it("727_727__::__            drop_while (\u03bbx = x < 0) {nil} == {nil}",function(){expect(r(function(a){return 0>a})({nil:!0})).toEqual({nil:!0})});it("728_728__::__            drop_while (\u03bbx = x > 0) [: 2, 1, 0 ] == [: 0 ]",function(){expect(r(function(a){return 0<
a})({head:2,tail:{head:1,tail:{head:0,tail:{nil:!0}}}})).toEqual({head:0,tail:{nil:!0}})});it("730_730__::__            inits [:] is [:[:]]",function(){expect(t({nil:!0})).toEqual({head:{nil:!0},tail:{nil:!0}})});it("731_731__::__            inits [:1,2,3] is [:[:],[:1],[:1,2],[:1,2,3]]",function(){expect(t({head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}})).toEqual({head:{nil:!0},tail:{head:{head:1,tail:{nil:!0}},tail:{head:{head:1,tail:{head:2,tail:{nil:!0}}},tail:{head:{head:1,tail:{head:2,tail:{head:3,
tail:{nil:!0}}}},tail:{nil:!0}}}}})});it("733_733__::__            tails [:] is [:[:]]",function(){expect(y({nil:!0})).toEqual({head:{nil:!0},tail:{nil:!0}})});it("734_734__::__            tails [:1,2,3] is [:[:1,2,3],[:2,3],[:3],[:]]",function(){expect(y({head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}})).toEqual({head:{head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}},tail:{head:{head:2,tail:{head:3,tail:{nil:!0}}},tail:{head:{head:3,tail:{nil:!0}},tail:{head:{nil:!0},tail:{nil:!0}}}}})});it("743_743__::__            length [: 1, 2, 3, 4 ] == 4",
function(){expect(v({head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{nil:!0}}}}})).toEqual(4)});it("750_750__::__            length (init 30 0) == 30",function(){expect(v(j(30)(0))).toEqual(30)});it("751_751__::__            tail (init 3 0)    == init 2 0",function(){expect(f(j(3)(0))).toEqual(j(2)(0))});it("759_759__::__            {nil} ++ (1 :: 2 :: {nil}) == 1 :: 2 :: {nil}",function(){expect(a({nil:!0})({head:1,tail:{head:2,tail:{nil:!0}}})).toEqual({head:1,tail:{head:2,tail:{nil:!0}}})});
it("760_760__::__            [: 1, 2 ] ++ [: 3, 4 ] == [: 1, 2, 3, 4 ]",function(){expect(a({head:1,tail:{head:2,tail:{nil:!0}}})({head:3,tail:{head:4,tail:{nil:!0}}})).toEqual({head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{nil:!0}}}}})});it("767_767__::__            [: 2, 3, 4 ] == [: 1, 2, 3 ] |> map \u03bbx = x + 1",function(){expect({head:2,tail:{head:3,tail:{head:4,tail:{nil:!0}}}}).toEqual(k(function(a){return a+1})({head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}}))});it("778_778__::__            reverse [: 1, 2, 3, 4 ] == [: 4, 3, 2, 1 ]",
function(){expect(p({head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{nil:!0}}}}})).toEqual({head:4,tail:{head:3,tail:{head:2,tail:{head:1,tail:{nil:!0}}}}})});it("780_781multi__::__            var test_x = [: 1, 2, 3, 4 ]\n            test_x == reverse <| reverse test_x",function(){expect(function(){try{var a={head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{nil:!0}}}}};return c(a)(p(p(a)))}catch(b){return{error:b}}}()).toEqual(!0)});it("789_790multi__::__            var x = [: 1, 2, 3, 4, 5, 6, 7, 8 ]\n            take 5 x == take' 5 x",
function(){expect(function(){try{var a={head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{head:5,tail:{head:6,tail:{head:7,tail:{head:8,tail:{nil:!0}}}}}}}}};return c(z(5)(a))(H(5)(a))}catch(b){return{error:b}}}()).toEqual(!0)});it("810_810__::__            foldl (+) 0 [: 1, 2, 3, 4 ] == 10",function(){expect(i(function(a){return function(b){b=a+b;return b}})(0)({head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{nil:!0}}}}})).toEqual(10)});it("811_811__::__            foldr (+) 0 [: 1, 2, 3, 4 ] == 10",
function(){expect(D(function(a){return function(b){b=a+b;return b}})(0)({head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{nil:!0}}}}})).toEqual(10)});it("815_815__::__            sum [:1,2,3] == 6",function(){expect(x({head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}})).toEqual(6)});it("819_819__::__            product [:1,2,4] == 8",function(){expect(G({head:1,tail:{head:2,tail:{head:4,tail:{nil:!0}}}})).toEqual(8)});it("828_828__::__            [: 1,2] 'find (\u03bbx = x > 2) == {none}",function(){expect(n(function(a){return 2<
a})({head:1,tail:{head:2,tail:{nil:!0}}})).toEqual({none:!0})});it("829_829__::__            [: 1,2,3,4] 'find (\u03bbx = x > 2) == {some: 3}",function(){expect(n(function(a){return 2<a})({head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{nil:!0}}}}})).toEqual({some:3})});it("830_830__::__            option 1 <| find (\u03bbx = x > 2) [: 1,2,3,4] == 3",function(){expect(J(1)(n(function(a){return 2<a})({head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{nil:!0}}}}}))).toEqual(3)});it("839_839__::__            [: 1, 2, 3, 4 ] 'filter (\u03bbx = x > 2) == [: 3, 4 ]",
function(){expect(h(function(a){return 2<a})({head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{nil:!0}}}}})).toEqual({head:3,tail:{head:4,tail:{nil:!0}}})});it("849_849__::__            partition (\u03bbx = true) [:] == [: [:],[:]]",function(){expect(w(function(){return!0})({nil:!0})).toEqual({head:{nil:!0},tail:{head:{nil:!0},tail:{nil:!0}}})});it("850_850__::__            partition (\u03bbx = x < 3) [:1,2,3,4] == [: [:1,2],[:3,4]]",function(){expect(w(function(a){return 3>a})({head:1,tail:{head:2,
tail:{head:3,tail:{head:4,tail:{nil:!0}}}}})).toEqual({head:{head:1,tail:{head:2,tail:{nil:!0}}},tail:{head:{head:3,tail:{head:4,tail:{nil:!0}}},tail:{nil:!0}}})});it("857_857__::__            all? id [:true,true]",function(){expect(function(){try{return m(function(a){return a})({head:!0,tail:{head:!0,tail:{nil:!0}}})}catch(a){return{error:a}}}()).toEqual(!0)});it("858_858__::__            not (all? id [:true,false])",function(){expect(function(){try{var a;a=!m(function(a){return a})({head:!0,tail:{head:!1,
tail:{nil:!0}}});return a}catch(b){return{error:b}}}()).toEqual(!0)});it("859_859__::__            any? id [:true,false]",function(){expect(function(){try{return d(function(a){return a})({head:!0,tail:{head:!1,tail:{nil:!0}}})}catch(a){return{error:a}}}()).toEqual(!0)});it("860_860__::__            not (any? id [:false,false])",function(){expect(function(){try{var a;a=!d(function(a){return a})({head:!1,tail:{head:!1,tail:{nil:!0}}});return a}catch(b){return{error:b}}}()).toEqual(!0)});it("868_868__::__            maximum [: 1, 2, 3 ] == 3",
function(){expect(E({head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}})).toEqual(3)});it("872_872__::__            minimum [: 1, 2, 3 ] == 1",function(){expect(F({head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}})).toEqual(1)});it("874_875multi__::__            let x = [:1,2], y = [:3,4]\n            concat [:x,y] == [:1,2,3,4]",function(){expect(function(){try{return c(g({head:{head:1,tail:{head:2,tail:{nil:!0}}},tail:{head:{head:3,tail:{head:4,tail:{nil:!0}}},tail:{nil:!0}}}))({head:1,tail:{head:2,
tail:{head:3,tail:{head:4,tail:{nil:!0}}}}})}catch(a){return{error:a}}}()).toEqual(!0)});it("877_877__::__            concat_map (\u03bbx = [:x,x+1]) [:1,2] == [:1,2,2,3]",function(){expect(B(function(a){return{head:a,tail:{head:a+1,tail:{nil:!0}}}})({head:1,tail:{head:2,tail:{nil:!0}}})).toEqual({head:1,tail:{head:2,tail:{head:2,tail:{head:3,tail:{nil:!0}}}}})})}});describe("seq",function(){var a=$prelude.$seq.fibs,b=$prelude.$seq.from_list,c=$prelude.$seq.iterate,e=$prelude.$seq.take,f=$prelude.$seq.to_list,
k=g.last||("undefined"==typeof global?window:global).last,d=g.length||("undefined"==typeof global?window:global).length,e=g.take||("undefined"==typeof global?window:global).take,h=j.floor||("undefined"==typeof global?window:global).floor,l=j.time||("undefined"==typeof global?window:global).time,a=$prelude.$seq.fibs,b=$prelude.$seq.from_list,c=$prelude.$seq.iterate,e=$prelude.$seq.take,f=$prelude.$seq.to_list;new function(){it("913_913__::__            to_list (from_list [:1,2]) == [:1,2]",function(){expect(f(b({head:1,
tail:{head:2,tail:{nil:!0}}}))).toEqual({head:1,tail:{head:2,tail:{nil:!0}}})});it("914_914__::__            iterate (\u03bbx = x + 1) 0 |> take 100 |> to_list |> length == 100",function(){expect(d(f(e(100)(c(function(a){return a+1})(0))))).toEqual(100)});it('950_954multi__::__            do! fast_time <- time yield fast_fib 30\n                slow_time <- time yield fibs |> take 30 |> to_list |> last\n                let ratio = floor (fast_time / slow_time * 100)\n                "#speedtest" $= ratio\n                return (ratio >= 2)',
function(){expect(function(){try{var b=l(function(){var a=function(b){return 0===b?0:1===b?1:a(b-1)+a(b-2)};return a(30)})(),c=l(function(){return k(f(e(30)(a)))})(),d=h(100*(b/c));if("undefined"!=typeof $){var i=$("#speedtest").get(0);"undefined"!=typeof i&&(i.innerHTML=d)}return 2<=d}catch(g){return{error:g}}}()).toEqual(!0)});it("956_956__::__            fibs |> take 5 |> to_list == [:1,1,2,3,5]",function(){expect(f(e(5)(a))).toEqual({head:1,tail:{head:1,tail:{head:2,tail:{head:3,tail:{head:5,
tail:{nil:!0}}}}}})});it("958_960multi__::__            fast_fib 15 == fibs |> take 15\n                                |> to_list\n                                |> last",function(){expect(function(){var a=function(b){return 0===b?0:1===b?1:a(b-1)+a(b-2)};return a}()(15)).toEqual(k(f(e(15)(a))))})}});describe("Forml Z",function(){var a=g._comp_comp||("undefined"==typeof global?window:global)._comp_comp,b=g.concat_map||("undefined"==typeof global?window:global).concat_map;new function(){it("1005_1008multi__::__            let (>>>=) x g = concat_map g x\n                z = 1 .. 3 >>>= \u03bbx = [:x, x + 1, x + 2]\n    \n            z == [:1,2,3,2,3,4,3,4,5]",
function(){expect(function(){try{var d=a(1)(3),e=b(function(a){return{head:a,tail:{head:a+1,tail:{head:a+2,tail:{nil:!0}}}}})(d);return c(e)({head:1,tail:{head:2,tail:{head:3,tail:{head:2,tail:{head:3,tail:{head:4,tail:{head:3,tail:{head:4,tail:{head:5,tail:{nil:!0}}}}}}}}}})}catch(f){return{error:f}}}()).toEqual(!0)})}});it("28_28__::__        not false",function(){expect(function(){return!0}()).toEqual(!0)});it("31_31__::__        object? {}",function(){expect(function(){return!0}()).toEqual(!0)});
it("32_32__::__        array? []",function(){expect(function(){try{var a;a=is_array;return a([])}catch(b){return{error:b}}}()).toEqual(!0)});it("33_33__::__        not (array? {})",function(){expect(function(){try{var a;a=!is_array({});return a}catch(b){return{error:b}}}()).toEqual(!0)});it("34_34__::__        not (object? 0)",function(){expect(function(){return!0}()).toEqual(!0)});it("55_58multi__::__        do! x   <- `1 + 4`\n            y   <- `2 + 3`\n            ans <- `x + y`\n            return (10 == ans)",
function(){expect(function(){try{var a;a=c(10)(10);return a}catch(b){return{error:b}}}()).toEqual(!0)});it("60_60__::__        5  == do! return 5",function(){expect(5).toEqual(5)});it("61_61__::__        10 == do! `5 + 5`",function(){expect(10).toEqual(10)});it("91_94multi__::__        var x = 0\n            y = do z <- `x = 1`\n                   return z\n        x == 0",function(){expect(function(){try{return c(0)(0)}catch(a){return{error:a}}}()).toEqual(!0)});it("152_152__::__        (3 * 4) + 5 * 4 == 64 / 2",
function(){expect(function(){return 32}()).toEqual(32)});it("153_153__::__        4 - 1 != 5 - 10",function(){expect(function(){try{var a;a=!c(3)(-5);return a}catch(b){return{error:b}}}()).toEqual(!0)});it("154_154__::__        (10 >= 5 + 5) != (4 + 5 <= 10 - 2)",function(){expect(function(){try{var a;a=!c(!0)(!1);return a}catch(b){return{error:b}}}()).toEqual(!0)});it("155_155__::__        ({test: 1} == {test: 1}) == true",function(){expect(c({test:1})({test:1})).toEqual(!0)});it("156_156__::__        ({test: 1} != {test: 1}) == false",
function(){expect(!c({test:1})({test:1})).toEqual(!1)});it("214_214__::__        3 |> (\u03bby = y + 1) |> \u03bby = y + 1 == 5",function(){expect(function(){try{var a;a=c(5)(5);return a}catch(b){return{error:b}}}()).toEqual(!0)});it("215_215__::__        (\u03bby x z = x + y + z + 1) 1 <| 3 <| 4 == 9",function(){expect(function(a){return function(b){return a(b)}}(function(a){return function(b){return function(c){c=b+a+c+1;return c}}}(1))(3)(4)).toEqual(9)});it("222_222__::__        (\u03bbx = x - 3) <: (\u03bbx = x - 3) <: 5 + 5 == 4",
function(){expect(function(a){return a-3}(function(a){return a-3}(10))).toEqual(4)});it("233_233__::__        ((\u03bbx = x + 1) .: (\u03bbx = x * 2) .: \u03bbx = x - 3) 4 == 3",function(){expect(d(function(a){return a+1})(d(function(a){return 2*a})(function(a){return a-3}))(4)).toEqual(3)});it("234_234__::__        id [1, 2, 3] == [1, 2, 3]",function(){expect([1,2,3]).toEqual([1,2,3])});it("235_235__::__        flip (\u03bbx y = x - y) 3 5 == 2",function(){expect(function(a){return function(b){b=
a-b;return b}}(5)(3)).toEqual(2)})}})});
</script>

  </head>

  <body data-spy="scroll" data-target=".bs-docs-sidebar">

    <!-- Navbar
    ================================================== -->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="">
                <a href="./index.html">Home</a>
              </li>
              <li class="active">
                <a href="./blog.html">News</a>
              </li>
              <li class="dropdown" >
                <a class="dropdown-toggle" data-toggle="dropdown" data=target="#" href="./readme.html">Code</a>
                <ul class="dropdown-menu" role="menu">
                  <li>
                    <a href="./tutorial.html">Tutorial</a>
                  </li>
                  <li>
                    <a href="./prelude.html">Prelude</a>
                  </li>
                  <li>
                    <a href="./tetris.html">Tetris</a>
                  </li>
                  <li>
                    <a href="./parsec.html">Parsec</a>
                  </li>
                </ul>
              </li>
              <li class="">
                <a href="./base-css.html">Get</a>
              </li>
              <li class="">
                <a id="run_tests" href="#">Test</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Subhead
    ================================================== -->
    <header class="jumbotron subhead" id="overview">
      <div class="container">
        <h1>Prelude.forml</h1>
        <p class='lead'><p>The standard library for the programming language Forml</p></p>
      </div>
    </header>


    <div class="container">
  
      <!-- Docs nav
      ================================================== -->
      <div class="row">
        <div class="span4 bs-docs-sidebar">
          <div class="nav nav-list bs-docs-sidenav">
              <div id="test_suite"></div>
          </div>
        </div>
        <div id="docs" class="span8">
          <p>If you are familiar with Haskell or ML, the prelude may serve as a good introduction to forml. Forml's syntax is quite liberal; to illustrate, the prelude will maintain an intentionally inconsistent style throughout.</p>
<p>First, we need to create a namespace with the <code>module</code> keyword.</p>
<pre><code>module prelude


    JS a = {} -&gt; a

    inline object? x = do! `typeof x === &quot;object&quot;`
    inline array?    = do! `is_array`
    inline string? x = do! `typeof x === &quot;string&quot;`

    inline cast: _ -&gt; _ | x = do! `x`

    inline
    num? x = do! `typeof x == &quot;number&quot;`


    inline type? x   = do! `typeof x`

    inline
    not: Bool -&gt; Bool 
    not x = do! `!x`
    <span class='test' id='test_28_28'>not false</span>
    

    <span class='test' id='test_31_31'>object? {}</span>
    <span class='test' id='test_32_32'>array? []</span>
    <span class='test' id='test_33_33'>not (array? {})</span>
    <span class='test' id='test_34_34'>not (object? 0)</span></code></pre>
<p>Side effects can only happen in Javascript, so we use a monadic container to compose these bits.</p>
<pre><code>    inline 
    (&gt;&gt;=): JS a -&gt; (a -&gt; JS b) -&gt; JS b
    (&gt;&gt;=)  x       y            = `y(x())()`

    inline 
    (&gt;&gt;): JS a -&gt; JS b -&gt; JS b
    (&gt;&gt;)  x       y     = `x(); return y();`

    inline return:

             a -&gt; JS a
      return x  = `x`

    
    <span class='test' id='test_55_58multi'>do! x   &lt;- `1 + 4`
        y   &lt;- `2 + 3`
        ans &lt;- `x + y`
        return (10 == ans)</span>

    <span class='test' id='test_60_60'>5  == do! return 5</span>
    <span class='test' id='test_61_61'>10 == do! `5 + 5`</span>

    do_times 0 _ = `undefined`
    do_times n f =
    
        f &gt;&gt; do_times (n - 1) f

    inline fmap:

          (a -&gt; b) -&gt; JS a -&gt; JS b 
        | f           js    = do

            val &lt;- js
            yield f val

    inline clone: a -&gt; JS a | x =

        if array? x
            `$.extend(true, [], x)`
        else 
            `$.extend(true, {}, x)`


    inline log: a -&gt; JS {} 
              | x  = `console.log(x)`</code></pre>
<p>Testing to verify that escaping Javascript &amp; utilizing escaped Javascript with <code>do</code> sugar and composition in general works as expected.</p>
<pre><code>    <span class='test' id='test_91_94multi'>var x = 0
        y = do z &lt;- `x = 1`
               return z
    x == 0</span></code></pre>
<h2 id="numbers">Numbers</h2>
<p>Some basic aliases to native javascript infix functions. These are type annotated to constrain inferrence - otherwise, these functions would all be inferred as <code>a -&gt; b -&gt; c</code>.</p>
<pre><code>    inline (&amp;&amp;): Bool -&gt; Bool -&gt; Bool | x y = do! `x &amp;&amp; y`
    inline (||): Bool -&gt; Bool -&gt; Bool | x y = do! `x || y`

    inline (*):  Num -&gt; Num -&gt; Num    | x y = do! `x * y`
    inline (/):  Num -&gt; Num -&gt; Num    | x y = do! `x / y`
    inline (%):  Num -&gt; Num -&gt; Num    | x y = do! `x % y`
    inline (+):  Num -&gt; Num -&gt; Num    | x y = do! `x + y`
    inline (-):  Num -&gt; Num -&gt; Num    | x y = do! `x - y`
    inline (&lt;=): Num -&gt; Num -&gt; Bool   | x y = do! `x &lt;= y`
    inline (&gt;=): Num -&gt; Num -&gt; Bool   | x y = do! `x &gt;= y`
    inline (&lt;):  Num -&gt; Num -&gt; Bool   | x y = do! `x &lt; y`
    inline (&gt;):  Num -&gt; Num -&gt; Bool   | x y = do! `x &gt; y`
    inline (^):  Num -&gt; Num -&gt; Num    | x y = do! `Math.pow(x, y)`</code></pre>
<p>Equality is overloaded to match records and arrays. By constraining the type of this operator, we need only dispatch on the type of the first element, constraining</p>
<pre><code>    inline x != y = not (x is y)

    inline x /= y = not (x == y)

    (==): a -&gt; a -&gt; Bool
        | x y when do! `x === y` = true
        | x y when object? x =
            do! `var result = true;
                 for (key in x) {
                    result = result &amp;&amp; y.hasOwnProperty(key) &amp;&amp; _eq_eq(x[key])(y[key]);
                 };

                 var z = Object.keys(x).length 
                             === Object.keys(y).length;

                 result &amp;&amp; z`
                 
        | x y when array? x =
            do! `var result = true;
                 for (z in x) {
                     result = result &amp;&amp; _eq_eq(x[z])(y[z]);
                 };

                 result &amp;&amp; x.length == y.length`

        | x y = false</code></pre>
<p>And a few simple tests to verify the correctness of these implementations. This is not meant to be exhaustive, only a smoke test against regressions.</p>
<pre><code>    <span class='test' id='test_152_152'>(3 * 4) + 5 * 4 == 64 / 2</span>
    <span class='test' id='test_153_153'>4 - 1 != 5 - 10</span>
    <span class='test' id='test_154_154'>(10 &gt;= 5 + 5) != (4 + 5 &lt;= 10 - 2)</span>
    <span class='test' id='test_155_155'>({test: 1} == {test: 1}) == true</span>
    <span class='test' id='test_156_156'>({test: 1} != {test: 1}) == false</span>
    
    inline
    rand: Num -&gt; JS Num | x =
        `Math.floor(Math.random() * x)`
    
    </code></pre>
<p>Fibonacci function</p>
<pre><code>    fib 0 = 0 | 1 = 1 | n = fib(n - 1) + fib(n - 2)</code></pre>
<h2 id="speed">Speed</h2>
<p>Due to the nested recursion, <code>fib</code> is an excellent function for testing the runtime speed versus raw javascript. <code>fast_fib</code> is a trivial javascript implementation of the same function, recursed itself to remove any potential overhead from forml's dispatch mechanism.</p>
<pre><code>    module speedtest

        private inline get_time = `new Date().getTime()`

        time js =

            do start &lt;- get_time
               js
               stop  &lt;- get_time
               return (stop - start)

        private inline
        fast_fib =

            do! `var f = function(n) {
                     return 0 === n ? 0 : 1 === n ? 1 : f(n - 1) + f(n - 2)
                 }; f`
                
        <span class='test' id='test_194_194'>fast_fib 7 == fib 7</span>
        </code></pre>
<p>With this, we can set up a simple canary to let us know if the prelude is suddenly dramatically slower than it previously was; in this case, we fail a test if the forml version isn't at least 90% as fast as the native javascript version.</p>
<pre><code>        floor: Num -&gt; Num = do! `Math.floor`

        <span class='test' id='test_203_205multi'>do! fast_time &lt;- time yield fast_fib 30
            slow_time &lt;- time yield fib 30
            return (floor (fast_time / slow_time * 100) &gt;= 80)</span></code></pre>
<h2 id="function-combinators">Function Combinators</h2>
<p>Simple left &amp; right pipes, ala F#.</p>
<pre><code>    inline x &lt;| y = x y
    inline x |&gt; y = y x
    
    <span class='test' id='test_214_214'>3 |&gt; (&#955;y = y + 1) |&gt; &#955;y = y + 1 == 5</span>
    <span class='test' id='test_215_215'>(&#955;y x z = x + y + z + 1) 1 &lt;| 3 &lt;| 4 == 9</span>
    </code></pre>
<p>Alternatively, there is a right associative version of <code>&lt;|</code>, ala haskell. All operators which end with a <code>:</code> are right associative.</p>
<pre><code>    inline x &lt;: y = x y
    
    <span class='test' id='test_222_222'>(&#955;x = x - 3) &lt;: (&#955;x = x - 3) &lt;: 5 + 5 == 4</span>
    </code></pre>
<p>Function composition</p>
<pre><code>    x .: y = &#955;z = x y(z)
    inline id x = x
    inline flip(f) x y = f(y, x)

    inline x &#39; y = y x

     
    <span class='test' id='test_233_233'>((&#955;x = x + 1) .: (&#955;x = x * 2) .: &#955;x = x - 3) 4 == 3</span>
    <span class='test' id='test_234_234'>id [1, 2, 3] == [1, 2, 3]</span>
    <span class='test' id='test_235_235'>flip (&#955;x y = x - y) 3 5 == 2</span>

    inline ignore = flip (&gt;&gt;) yield {}</code></pre>
<h2 id="strings">Strings</h2>
<pre><code>    module string
        
        inline 
        lstrip: String -&gt; String
        lstrip x = do! `x.replace(/^\s+/, &#39;&#39;)` 
 
        inline rstrip: String -&gt; String | x = do! `x.replace(/\s+$/, &#39;&#39;)` 
        inline strip:  String -&gt; String | = lstrip .: rstrip

        length: String -&gt; Num | n = do! `n.length`
        </code></pre>
<p>TODO concat cannot be inlined because it shadows concat in other modules, and inlines currently do not respect shadows.</p>
<pre><code>        concat: Array String -&gt; String
        concat xs = do! `xs.join(&quot;&quot;)`

        inline 
        (+++): _ -&gt; _ -&gt; String
        x +++ y = do! `&quot;&quot; + x + y`

        <span class='test' id='test_267_267'>strip &quot;    test    &quot; is &quot;test&quot;</span></code></pre>
<p>interpolated strings</p>
<pre><code>        <span class='test' id='test_271_272multi'>let x = &quot;test&quot;
        in &quot;hello `x`&quot; is &quot;hello test&quot;</span>
        
        Regex = { regex: {} }
        
        regex: String -&gt; String -&gt; Regex | r o = do! `new RegExp(r, o)`
        
        replace: Regex -&gt; String -&gt; String -&gt; String
               | r        s         t       = 
               
                   do! `(t).replace(r, s)`
                   
        to_string: _ -&gt; String | x = do! `x + &quot;&quot;`

    open string</code></pre>
<h2 id="tests">Tests</h2>
<p>By invoking javascript, we can listen for exceptions.</p>
<pre><code>    err x = do! `try {
                     x();
                     return false;
                 } catch (e) {
                     return e;
                 }`</code></pre>
<h2 id="option">Option</h2>
<pre><code>    module option
        
        Option a = {some: a} | {none}
        
        option b {none} = b
             | _ {some: x} = x

        <span class='test' id='test_308_308'>{none} == {none}</span>
        <span class='test' id='test_309_309'>{some: 2} == {some: 2}</span>
        <span class='test' id='test_310_310'>option 3 {some: 2} == 2</span></code></pre>
<h2 id="html">HTML</h2>
<pre><code>    module html

        HTML = { element:   _
                 inner:     JS String
                 on_click:  JS {} -&gt; JS {}
                 set:       _w -&gt; JS {}
                 add_class: String -&gt; JS {}
                 add_style: String -&gt; String -&gt; JS {} }

        get:
              String -&gt; JS HTML
            | x = do el &lt;- `$(x).get(0)`

                     return { element    = el
                              inner      = `el.innerHTML`
                              on_click y = `el.onclick = y`
                              set y      = `el.innerHTML = y`

                              add_class y =
                                  `el.setAttribute(&quot;class&quot;, el.getAttribute(&quot;class&quot;) + &quot; &quot; + y)`

                              add_style y z = `el.style[y] = z` }

        inline ($=):

           String -&gt; _ -&gt; JS {}
           x      $= y  =

             `if (typeof $ != &quot;undefined&quot;) {
                  var xx = $(x).get(0);
                  if (typeof xx != &quot;undefined&quot;) {
                      xx.innerHTML = y;
                  }
              }`

        inline ($|): 

             String   -&gt; String -&gt; String -&gt; JS {}
             selector $| rule      value   = `$(selector).css(rule, value)`

        inline 
        ($.): String -&gt; String -&gt; JS {}
        ($.) x y = `$(x).addClass(y)`

        inline ($+): String -&gt; String -&gt; JS {}
            | x y = `$(x).append(y)`

        div: String -&gt; JS String
            | x = yield &quot;&lt;div id=&#39;`x`&#39;/&gt;&quot;

        move: HTML -&gt; HTML -&gt; JS _
            | x y = `$(y.element).append($(x.element).detach())`
                       
        on_load: JS {} -&gt; JS {}
            | x = `window.addEventListener(&quot;load&quot;, x, false)`

        inline stringify: _ -&gt; String | x = do! `JSON.stringify(x)`

        inline (!!): Array a -&gt; Num -&gt; a | x y = do! `x[y]`

        with_page: JS&lt;a&gt; -&gt; JS&lt;a&gt;
            | x = do old &lt;- `$(&quot;body&quot;).clone()`
                     xx &lt;- x
                     `$(&quot;body&quot;).replaceWith(old)`
                     return xx
                     
        inline on_key:
    
              Num -&gt; JS _ -&gt; JS {}
            | key    action =
    
                `jQuery(window).keydown(function(event) {
                     if (event.keyCode == key) {
                        event.preventDefault();
                        action();
                     }
                 })`</code></pre>
<p>do! with_page do &quot;body&quot; $= &quot;Test&quot; text &lt;- get &quot;body&quot; text &lt;- text.inner return (text == &quot;Test&quot;)</p>
<pre><code>        <span class='test' id='test_398_408multi'>do! d &lt;- div &quot;test1&quot;

            &quot;body&quot;   $+ d
            &quot;#test1&quot; $= &quot;I am a test!&quot;

            text &lt;- get &quot;#test1&quot;
            text &lt;- text.inner

            &quot;#test1&quot; $= &quot;&quot;

            return (text == &quot;I am a test!&quot;)</span>

        inline split: String -&gt; String -&gt; Array String | y x = do! `x.split(y)`</code></pre>
<p>This is the initializer for prelude's console test suite.</p>
<pre><code>        console_runner: JS {} =

            var is_error = 0

            var get_line x =  x |&gt; split &quot;__::__&quot;
                                |&gt; \x = x !! 0
                                |&gt; split &quot;_&quot; 
                                |&gt; \x = x !! 0
                                |&gt; \x = do! `parseInt x`
                                |&gt; \x = x + 1
                                |&gt; stringify

            var report_failed spec results =

                    let items = spec.results_.items_
                        desc  = split &quot;__::__&quot; spec.description !! 1
                        exp   = stringify (items !! 0).expected
                        act   = stringify (items !! 0).actual
                        line  = get_line spec.description
                    
                    do  if is_error == 0
                            then log &quot;\r                                          &quot; 
                            else return {}

                        `is_error = 1`

                        log &quot;Test failed at line `line`

                             `desc`
                             
                                 Expected `exp`
                                 Actual   `act`&quot;

                        log &quot;&quot;

            var report spec = 

                    do! results &lt;- `spec.results()`
                        passed  &lt;- `results.passed()`

                        if   passed 
                        then return {}
                        else report_failed spec results

            var reporter = { reportSpecResults:   report 
                             reportRunnerResults: `if (typeof phantom != &quot;undefined&quot;) { phantom.exit(is_error); }` }

            var jasmine: a

            do  env &lt;- jasmine.getEnv

                yield 
                env.addReporter reporter
                env.execute


        push : a -&gt; Array a -&gt; JS (Array a)
        push xs x = `xs.push(x)` 

        private console_reporter = {

            total    = 0
            failed   = 0

            messages = []

            reportSpecResults spec = do!
                results &lt;- `spec.results()`
                passed  &lt;- `results.passed()`
                `console_reporter.total++`

                if not passed then do
                    `console_reporter.failed++`
                    push console_reporter.messages spec.description
                    return {}
                return {}

            reportRunnerResults = do
                if console_reporter.failed &gt; 0
                    log console_reporter.messages
                         
                log &quot;`console_reporter.total - console_reporter.failed`/`console_reporter.total` tests passed&quot;
        }</code></pre>
<p>This is the initializer for prelude's HTML test suite.</p>
<pre><code>        table_of_contents = do

            let jasmine: a

            &quot;.test&quot; $| &quot;position&quot; &lt;| &quot;relative&quot;
            &quot;.test&quot; $| &quot;left&quot;     &lt;| &quot;50px&quot;

            trivial &lt;- `new jasmine.TrivialReporter`
            forml   &lt;- `new jasmine.FormlReporter`
            env     &lt;- jasmine.getEnv

            `env.addReporter trivial`
            `env.addReporter forml`
            `env.addReporter console_reporter`

            env.execute

            reporter &lt;- get &quot;.jasmine_reporter&quot;
            body     &lt;- get &quot;#test_suite&quot;

            move reporter body
               </code></pre>
<h2 id="arrays">Arrays</h2>
<pre><code>    module array
    
        type UnboxedArray x = {
            unshift: x -&gt; Num
            push:    x -&gt; Num
            length:  Num
            map:     (x -&gt; y) -&gt; (UnboxedArray y)
            forEach: (x -&gt; _) -&gt; {}
            reverse: JS (UnboxedArray x)
            reduce: (x -&gt; x -&gt; x) -&gt; x
        }
        
        private inline unbox: Array a -&gt; UnboxedArray a = cast
        private inline box:   UnboxedArray a -&gt; Array a = cast
           
        private inline
        chain f xs =
        
            let _ = f (unbox xs)
            in  xs

        inline length     = .length .: unbox
        inline map f      = box .: .map f .: unbox
        inline push! x    = chain (.push x)
        inline unshift! x = chain (.unshift x)
        reverse x         = do yield do! (unbox x).reverse
                               yield x

        reduce f = .reduce (do! `function(x, y) { return f(x)(y); }`) .: unbox
                               
        inline get: Num -&gt; Array x -&gt; x
            | x xs = do! `xs[x]`

        inline set: Num -&gt; a -&gt; Array a -&gt; JS (Array a)
            | idx i arr = `arr[idx] = i; return arr`
        
        inline sequence: Array (JS a) -&gt; JS (Array a)
            | xs = `xs.map(run)`
        
        (..): Num -&gt; Num -&gt; Array Num 
        x .. y = do! 

            if x &gt; y
            then reverse (y .. x)
            else 
                `var z = [];
                 for (var i = x; i &lt;= y; i++) z.push(i);
                 return z`

        times: Num -&gt; a -&gt; Array a
            | n _ when n &lt; 0 = []
            | n yld = 0 .. (n - 1) &#39;map \_ = yld

        inline
        put: a -&gt; Array a -&gt; JS (Array a)
           | x    xs       = do
                y &lt;- clone xs
                yield push! x y
        
        all? = reduce (&amp;&amp;)

        sum  = reduce (+)

        inline
        for_each: (Num -&gt; _) -&gt; Array _ -&gt; JS {}
            | f xs = `for (x in xs) { f(parseInt(x)); }`
        
        inline
        zip_with: (a -&gt; b -&gt; c) -&gt; Array a -&gt; Array b -&gt; Array c
        zip_with f xs ys =
        
            let z   = []
                h m = m ys &#39;f (m xs) 
                g   = flip push! z .: h .: get
        
            in  do! xs &#39;for_each g
                    yield z 

        <span class='test' id='test_604_604'>[3, 2, 1] == do! reverse [1, 2, 3]</span>
                 
        <span class='test' id='test_606_608multi'>let x = []
            _ = push! 1 x
        x == [1]</span>

        <span class='test' id='test_610_610'>1 .. 3 == [1, 2, 3]</span>
        <span class='test' id='test_611_611'>3 .. 1 == [3, 2, 1]</span>

        <span class='test' id='test_613_613'>reduce (&amp;&amp;) [true, true, true]</span>

        <span class='test' id='test_615_615'>5 &#39;times 5 == [5, 5, 5, 5, 5]</span>

        <span class='test' id='test_617_617'>[1, 2, 3] == do! put 3 [1, 2]</span>
                
        <span class='test' id='test_619_619'>map (.x) [{x: 1}, {x: 2}] == [1, 2]</span>
    
        <span class='test' id='test_621_621'>zip_with (\x y = x + y) [1, 2, 3] [3, 2, 1] == [4, 4, 4]</span>



        
                       </code></pre>
<h2 id="lists">Lists</h2>
<p>A simple implementation of a library for manipulating linked lists.</p>
<pre><code>    module list
        
        open option
    
        List a = { head: a, tail: List a } 
               | { nil }
                 </code></pre>
<p>This complex type can be hidden behind a constructor function which works more like a traditional cons.</p>
<pre><code>        inline 
        x :: y = { head = x, tail = y }</code></pre>
<p>The compiler itself also supports the list sugar <code>[: 1, 2, 3 ]</code> (or <code>[: 1, 2, 3 :]</code>, if you prefer symmetry). All of these lists are synonyms.</p>
<pre><code>        <span class='test' id='test_648_662multi'>var xs = [:

            [:1,2,3]

            [:1,2,3:]

            (1::2::3::{nil})

            { head = 1
              tail = { head = 2
                       tail = { head = 3
                                tail = {nil} }}}
        ]

        all? (&#955;y = [:1,2,3] == y) xs </span>
                           </code></pre>
<p>Simple implementations of list accessors, which illustrate incomplete definition.</p>
<pre><code>        empty? { nil } = true | _ = false

        head { head: x, tail: _ } = x
           | { nil } = error &quot;Head called on empty list&quot;
           
        tail { head: _, tail: x } = x 
           | { nil } = error &quot;Tail called on empty list&quot;

        last { head: x, tail: { nil } } = x
        last { head: _, tail: x } = last x
        last { nil } = error &quot;Last called on empty list&quot;

        take 0 x = { nil } | n x = head x :: take (n - 1) (tail x)
        drop 0 x = x | n x = drop (n - 1) (tail x)

        x .. y = 
            let f xx z when xx &gt;= x = f (xx - 1) (xx :: z)
                f _ z = z 

            f y {nil}
           
        <span class='test' id='test_689_689'>1 .. 5 == [:1,2,3,4,5]</span></code></pre>
<p>Project Euler problem 1, modified to protect the innocent:</p>
<pre><code>        <span class='test' id='test_693_693'>288045 == 1 .. 1111 |&gt; filter (&#955;x = x % 3 == 0 || x % 5 == 0) |&gt; sum</span>


        take_while f { nil } = { nil }
                 | f x when f (head x) = head x :: filter f (tail x)
                 | _ _ = { nil }

        drop_while f { nil } = { nil }
                 | f x when f (head x) = drop_while f (tail x)
                 | _ x = x

        inits [:] = [:[:]]
            | {head: x, tail: xs} = [:[:]] ++ (map (&#955;y = x::y) (inits xs))

        tails [:] = [:[:]]
            | xxs = xxs :: tails &lt;| tail xxs

        <span class='test' id='test_710_710'>not (empty? (1 :: {nil}))</span>
        <span class='test' id='test_711_711'>empty? [:]</span>
   
        <span class='test' id='test_713_713'>head [: 1, 2 ] is 1</span>
        <span class='test' id='test_714_714'>tail [: 1, 2 ] is [:2]</span>
        <span class='test' id='test_715_715'>last [: 1, 2 ] is 2</span>

        <span class='test' id='test_717_717'>err (lazy head {nil}) is &quot;Head called on empty list&quot;</span>
        <span class='test' id='test_718_718'>err (lazy tail {nil}) is &quot;Tail called on empty list&quot;</span>
        <span class='test' id='test_719_719'>err (lazy last {nil}) is &quot;Last called on empty list&quot;</span>

        <span class='test' id='test_721_721'>take(2, [: 1, 2, 3 ]) == [: 1, 2 ]</span>
        <span class='test' id='test_722_722'>drop(2, [: 1, 2, 3 ]) == [: 3 ]</span>

        <span class='test' id='test_724_724'>take_while (&#955;x = x &lt; 0) [:] == [:]</span>
        <span class='test' id='test_725_725'>take_while (&#955;x = x &gt; 0) [: 2, 1, 0 ] == [: 2, 1 ]</span>

        <span class='test' id='test_727_727'>drop_while (&#955;x = x &lt; 0) {nil} == {nil}</span>
        <span class='test' id='test_728_728'>drop_while (&#955;x = x &gt; 0) [: 2, 1, 0 ] == [: 0 ]</span>

        <span class='test' id='test_730_730'>inits [:] is [:[:]]</span>
        <span class='test' id='test_731_731'>inits [:1,2,3] is [:[:],[:1],[:1,2],[:1,2,3]]</span>

        <span class='test' id='test_733_733'>tails [:] is [:[:]]</span>
        <span class='test' id='test_734_734'>tails [:1,2,3] is [:[:1,2,3],[:2,3],[:3],[:]]</span></code></pre>
<p>Cardinality</p>
<pre><code>        length 

             | {nil}              = 0
             | {head: _, tail: x} = 1 + length x
             
        <span class='test' id='test_743_743'>length [: 1, 2, 3, 4 ] == 4</span></code></pre>
<p>Generators</p>
<pre><code>        init 0 _ = {nil}
           | n x = x :: init (n - 1) x
           
        <span class='test' id='test_750_750'>length (init 30 0) == 30</span>
        <span class='test' id='test_751_751'>tail (init 3 0)    == init 2 0</span></code></pre>
<p>List concatenation</p>
<pre><code>        (++)
           | {nil} y                = y
           | {head: y, tail: ys} xs = y :: (ys ++ xs)

        <span class='test' id='test_759_759'>{nil} ++ (1 :: 2 :: {nil}) == 1 :: 2 :: {nil}</span>
        <span class='test' id='test_760_760'>[: 1, 2 ] ++ [: 3, 4 ] == [: 1, 2, 3, 4 ]</span></code></pre>
<p>Map</p>
<pre><code>        map(f, {nil}) = {nil}
        map(f, x)     = f(head(x)) :: map(f, tail(x))
          
        <span class='test' id='test_767_767'>[: 2, 3, 4 ] == [: 1, 2, 3 ] |&gt; map &#955;x = x + 1</span>
            </code></pre>
<p>Reverse</p>
<pre><code>        reverse y = 
            let r rest [:] = rest
                r rest { head: x, tail: xs } = 
                    r (x :: rest) xs

            in  r {nil} y

        <span class='test' id='test_778_778'>reverse [: 1, 2, 3, 4 ] == [: 4, 3, 2, 1 ]</span>

        <span class='test' id='test_780_781multi'>var test_x = [: 1, 2, 3, 4 ]
        test_x == reverse &lt;| reverse test_x</span>

        take&#39; x y =
            let t(0, _, acc) = acc
                t(n, x, acc) = t(n - 1, tail x, head x :: acc)

            in  reverse t(x, y, {nil})

        <span class='test' id='test_789_790multi'>var x = [: 1, 2, 3, 4, 5, 6, 7, 8 ]
        take 5 x == take&#39; 5 x</span></code></pre>
<p>Folds</p>
<pre><code>        foldl f x xs =
            var g y {nil} = y
                | y { head: z, tail: zs } = g (f y z) zs
            g x xs

        foldl1 _ {nil} = error &quot;Foldl1 called on empty list&quot;
             | f x = foldl f (head x) (tail x)
     
        foldr f x =
            var g {nil} = x
                g { head: y, tail: ys } = f y (g ys)
            g

        foldr1 _ {nil} = error &quot;Foldr1 called on empty list&quot;
             | f x = foldr f (head x) (tail x)

        <span class='test' id='test_810_810'>foldl (+) 0 [: 1, 2, 3, 4 ] == 10</span>
        <span class='test' id='test_811_811'>foldr (+) 0 [: 1, 2, 3, 4 ] == 10</span>

        sum = foldl1 (+)

        <span class='test' id='test_815_815'>sum [:1,2,3] == 6</span>

        product = foldl1 (*)

        <span class='test' id='test_819_819'>product [:1,2,4] == 8</span>
                  </code></pre>
<p>Find</p>
<pre><code>        find: (a -&gt; Bool) -&gt; List a -&gt; Option a
            | f {nil} = {none}
            | f {head: h, tail: _} when f h = {some = h}
            | f {head: _, tail: t} = find f t

        <span class='test' id='test_828_828'>[: 1,2] &#39;find (&#955;x = x &gt; 2) == {none}</span>
        <span class='test' id='test_829_829'>[: 1,2,3,4] &#39;find (&#955;x = x &gt; 2) == {some: 3}</span>
        <span class='test' id='test_830_830'>option 1 &lt;| find (&#955;x = x &gt; 2) [: 1,2,3,4] == 3</span>
        </code></pre>
<p>Filter</p>
<pre><code>        filter: (a -&gt; Bool) -&gt; List a -&gt; List a
              | f {nil} = {nil}
              | f x when f (head x) = head x :: filter f (tail x)
              | f x = filter f &lt;| tail x
        
        <span class='test' id='test_839_839'>[: 1, 2, 3, 4 ] &#39;filter (&#955;x = x &gt; 2) == [: 3, 4 ]</span>
 </code></pre>
<p>Partition</p>
<pre><code>        partition f = 
              let s x {head: l1, tail: l2} =
                let l2&#39; = head l2
                if f x then [: x::l1,l2&#39;] else [: l1,x::l2&#39;]
              foldr s [:[:],[:]]

        <span class='test' id='test_849_849'>partition (&#955;x = true) [:] == [: [:],[:]]</span>
        <span class='test' id='test_850_850'>partition (&#955;x = x &lt; 3) [:1,2,3,4] == [: [:1,2],[:3,4]]</span>
        </code></pre>
<p>All? &amp; Any?</p>
<pre><code>        all? f = foldl1 (&amp;&amp;) .: map f
        any? f = foldl1 (||) .: map f

        <span class='test' id='test_857_857'>all? id [:true,true]</span>
        <span class='test' id='test_858_858'>not (all? id [:true,false])</span>
        <span class='test' id='test_859_859'>any? id [:true,false]</span>
        <span class='test' id='test_860_860'>not (any? id [:false,false])</span>

        concat = foldl1 &#955;x y = x ++ y
        concat_map f xs = concat (map f xs)
        
        maximum = foldl1 &#955;(x, y) when x &gt; y = x
                         |(_, y) = y

        <span class='test' id='test_868_868'>maximum [: 1, 2, 3 ] == 3</span>

        minimum = foldl1 &#955;x y = if x &gt; y then y else x
     
        <span class='test' id='test_872_872'>minimum [: 1, 2, 3 ] == 1</span>
        
        <span class='test' id='test_874_875multi'>let x = [:1,2], y = [:3,4]
        concat [:x,y] == [:1,2,3,4]</span>

        <span class='test' id='test_877_877'>concat_map (&#955;x = [:x,x+1]) [:1,2] == [:1,2,2,3]</span>
        </code></pre>
<h2 id="sequences">Sequences</h2>
<p>Sequences are an abstract data type which resembles a list, except that elements Sequences may be infinite, as long as you never try to read every element. However, the current implementation is stack-consuming and thus limited by the underlying javascript runtime [TODO].</p>
<pre><code>    module seq

        open list
        open speedtest
        open html
    
        Seq a = { seq: JS { elem: a, next: Seq a}}
              | { end }

        inline seq x = {seq: x}
                   
        iterate f x = seq yield { elem: x, next: iterate f (f x) }

        from_list {nil} = {end}
                | { head: x, tail: xs } =
                    { seq: yield { elem: x, next: from_list xs }}
                    
        to_list { end }    = {nil}
              | { seq: x } = do! { elem: y, next: ys } &lt;- x
                                 return (y :: to_list ys)

        take _ {end} = {end}
           | 0 _ = {end}
           | x { seq: y } = seq do { elem: z, next: zs } &lt;- y
                                   return { elem: z, next: take (x - 1) zs }

        <span class='test' id='test_913_913'>to_list (from_list [:1,2]) == [:1,2]</span>
        <span class='test' id='test_914_914'>iterate (&#955;x = x + 1) 0 |&gt; take 100 |&gt; to_list |&gt; length == 100</span>

        zip_with:
        
              (a -&gt; b -&gt; c) -&gt; Seq a -&gt; Seq b -&gt; Seq c
            | _ {end}    _____    = {end}
            | _ _____    {end}    = {end}
            | f {seq: a} {seq: b} = seq do

                { elem: xx, next: xs } &lt;- a
                { elem: yy, next: ys } &lt;- b

                return { elem: f xx yy, next: zip_with f xs ys }
                                        
        inline x ::: y = seq yield { elem: x, next: do! y }
        
        tail:
              Seq a   -&gt; Seq a
            | {end}    = error &quot;tail called on empty seq&quot;
            | {seq: t} = do! t &gt;&gt;= &#955;x = return x.next
 
        to_lazy
              | {end} = {end}
              | {seq: y} = seq lazy do!
                    {elem: x, next: xs} &lt;- y
                    return {elem: x, next: to_lazy xs}
 </code></pre>
<p>Infinite sequence example</p>
<pre><code>        fibs = to_lazy &lt;: 1 ::: return &lt;: 1 ::: yield zip_with (&#955;x y = x + y) fibs &lt;: tail fibs
    </code></pre>
<p>Since the <code>lazy</code> keyword memoizes it's argument, this fibonacci implementation is ridiculously faster than the recursive version. For example, the runtime speed of this fib implementation compared to the native recursive one is <span
id="speedtest">__________</span>%.</p>
<pre><code>        <span class='test' id='test_950_954multi'>do! fast_time &lt;- time yield fast_fib 30
            slow_time &lt;- time yield fibs |&gt; take 30 |&gt; to_list |&gt; last
            let ratio = floor (fast_time / slow_time * 100)
            &quot;#speedtest&quot; $= ratio
            return (ratio &gt;= 2)</span>

        <span class='test' id='test_956_956'>fibs |&gt; take 5 |&gt; to_list == [:1,1,2,3,5]</span>

        <span class='test' id='test_958_960multi'>fast_fib 15 == fibs |&gt; take 15
                            |&gt; to_list
                            |&gt; last</span></code></pre>
<h2 id="formlz">FormlZ</h2>
<p>Demonstration of some classic FP data structures. This form of polymorphism can be simulated in Forml the same way they are implemented in Haskell - as a function dictionary, the only difference being that you must explicitly bind the dictionary instance to a symbol (as opposed to it being referenced by the type variable's instantiation).</p>
<pre><code>    module &quot;Forml Z&quot;

        open list

        Functor f =

            { map: (a -&gt; b) -&gt; f a -&gt; f b }

        Monad m =

            { (&gt;&gt;=): m a -&gt; (a -&gt; m b) -&gt; m b
              ret: a -&gt; m a }

        map z x f = z.map f x

        bind { ret: f, _ } x = f x

        list_functor =

            { map _ {nil} = {nil} 
                | f { head: x, tail: xs } =
                      { head: f x
                        tail: list_functor.map f xs }}

        list_monad =

            { (&gt;&gt;=) x g = concat_map g x
              return x = [:x] }

        js_monad =

            { (&gt;&gt;=) x f = x &gt;&gt;= f
              return x = return x }

        <span class='test' id='test_1005_1008multi'>let (&gt;&gt;&gt;=) x g = concat_map g x
            z = 1 .. 3 &gt;&gt;&gt;= &#955;x = [:x, x + 1, x + 2]

        z == [:1,2,3,2,3,4,3,4,5]</span></code></pre>
        </div>
      </div>
  
    </div>

    <!-- Footer
    ================================================== -->
    <footer class="footer">
      <div class="container">
      </div>
    </footer>
    
    <script type="text/javascript">
      jQuery('.bs-docs-sidenav').affix({
        offset: {
          top: function () {
            if ($(window).width() <= 767) {
              return Infinity;
            } else {
              var test_height = jQuery("#test_suite").height() - jQuery(window).height();
              var page_height = jQuery(document).height();
              var ratio = test_height / page_height;
              var offset = Math.min(-5, -((document.body.scrollTop - 380) * (test_height / page_height)));
              jQuery("#test_suite").css("margin-top", offset)
              return 380;
            }
          }
        }
      });

      jQuery('pre').addClass('prettyprint lang-hs');
      prettyPrint();
      jQuery('#run_tests').bind('click', $prelude.$html.table_of_contents);

    </script>

  </body>
</html>